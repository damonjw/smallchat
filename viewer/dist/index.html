<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Multi-Agent Event Log Viewer</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const Rn=!1;var wr=Array.isArray,_s=Array.prototype.indexOf,Yn=Array.from,Er=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor,kr=Object.getOwnPropertyDescriptors,hs=Object.prototype,ps=Array.prototype,Jn=Object.getPrototypeOf,fr=Object.isExtensible;const pt=()=>{};function gs(e){return e()}function kn(e){for(var t=0;t<e.length;t++)e[t]()}function xr(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const be=2,Sr=4,An=8,ms=1<<24,it=16,ot=32,At=64,Mn=128,Ue=512,ge=1024,Ie=2048,Xe=4096,$e=8192,st=16384,Wn=32768,Jt=65536,ur=1<<17,Tr=1<<18,Qt=1<<19,Pr=1<<20,Tt=32768,Ln=1<<21,Gn=1<<22,gt=1<<23,Kt=Symbol("$state"),bs=Symbol("legacy props"),Bt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ys(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ws(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Es(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ks(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ss(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ts(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ps(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ds(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function As(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ms(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Dr=1,Ar=2,Mr=4,Cs=8,Is=16,Ns=2,Os=4,$s=8,Rs=1,Ls=2,we=Symbol(),Fs="http://www.w3.org/1999/xhtml";function js(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Cr(e){return e===this.v}function Ir(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Nr(e){return!Ir(e,this.v)}let en=!1,zs=!1;function qs(){en=!0}let ee=null;function Wt(e){ee=e}function Mt(e,t=!1,n){ee={p:ee,i:!1,c:null,e:null,s:e,x:null,l:en&&!t?{s:null,u:null,$:[]}:null}}function Ct(e){var t=ee,n=t.e;if(n!==null){t.e=null;for(var r of n)Kr(r)}return t.i=!0,ee=t.p,{}}function vn(){return!en||ee!==null&&ee.l===null}let Ut=[];function Bs(){var e=Ut;Ut=[],kn(e)}function _n(e){if(Ut.length===0){var t=Ut;queueMicrotask(()=>{t===Ut&&Bs()})}Ut.push(e)}function Or(e){var t=j;if(t===null)return R.f|=gt,e;if((t.f&Wn)===0){if((t.f&Mn)===0)throw e;t.b.error(e)}else Gt(e,t)}function Gt(e,t){for(;t!==null;){if((t.f&Mn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const yn=new Set;let Q=null,je=null,Ye=[],Xn=null,Fn=!1;class Je{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#l=null;#a=[];#s=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Ye=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(Q=null,cr(n.render_effects),cr(n.effects),this.#l?.resolve()),je=null}#i(t,n){t.f^=ge;for(var r=t.first;r!==null;){var s=r.f,a=(s&(ot|At))!==0,l=a&&(s&ge)!==0,f=l||(s&$e)!==0||this.skipped_effects.has(r);if((r.f&Mn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!f&&r.fn!==null){a?r.f^=ge:(s&Sr)!==0?n.effects.push(r):tn(r)&&((r.f&it)!==0&&n.block_effects.push(r),Zt(r));var o=r.first;if(o!==null){r=o;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(t){for(const n of t)((n.f&Ie)!==0?this.#a:this.#s).push(n),this.#f(n.deps),me(n,ge)}#f(t){if(t!==null)for(const n of t)(n.f&be)===0||(n.f&Tt)===0||(n.f^=Tt,this.#f(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&gt)===0&&(this.current.set(t,t.v),je?.set(t,t.v))}activate(){Q=this,this.apply()}deactivate(){Q===this&&(Q=null,je=null)}flush(){if(this.activate(),Ye.length>0){if(Us(),Q!==null&&Q!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#c()}#c(){if(yn.size>1){this.previous.clear();var t=je,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of yn){if(a===this){n=!1;continue}const l=[];for(const[o,u]of this.current){if(a.current.has(o))if(n&&u!==a.current.get(o))a.current.set(o,u);else continue;l.push(o)}if(l.length===0)continue;const f=[...a.current.keys()].filter(o=>!this.current.has(o));if(f.length>0){var s=Ye;Ye=[];const o=new Set,u=new Map;for(const c of l)$r(c,f,o,u);if(Ye.length>0){Q=a,a.apply();for(const c of Ye)a.#i(c,r);a.deactivate()}Ye=s}}Q=null,je=t}this.committed=!0,yn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#a)me(t,Ie),Pt(t);for(const t of this.#s)me(t,Xe),Pt(t);this.#a=[],this.#s=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=xr()).promise}static ensure(){if(Q===null){const t=Q=new Je;yn.add(Q),Je.enqueue(()=>{Q===t&&t.flush()})}return Q}static enqueue(t){_n(t)}apply(){}}function Us(){var e=bt;Fn=!0;var t=null;try{var n=0;for(Sn(!0);Ye.length>0;){var r=Je.ensure();if(n++>1e3){var s,a;Hs()}r.process(Ye),mt.clear()}}finally{Fn=!1,Sn(e),Xn=null}}function Hs(){try{Ss()}catch(e){Gt(e,Xn)}}let nt=null;function cr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(st|$e))===0&&tn(r)&&(nt=new Set,Zt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Gr(r):r.fn=null),nt?.size>0)){mt.clear();for(const s of nt){if((s.f&(st|$e))!==0)continue;const a=[s];let l=s.parent;for(;l!==null;)nt.has(l)&&(nt.delete(l),a.push(l)),l=l.parent;for(let f=a.length-1;f>=0;f--){const o=a[f];(o.f&(st|$e))===0&&Zt(o)}}nt.clear()}}nt=null}}function $r(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const a=s.f;(a&be)!==0?$r(s,t,n,r):(a&(Gn|it))!==0&&(a&Ie)===0&&Rr(s,t,r)&&(me(s,Ie),Pt(s))}}function Rr(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&be)!==0&&Rr(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function Pt(e){for(var t=Xn=e;t.parent!==null;){t=t.parent;var n=t.f;if(Fn&&t===j&&(n&it)!==0&&(n&Tr)===0)return;if((n&(At|ot))!==0){if((n&ge)===0)return;t.f^=ge}}Ye.push(t)}function Vs(e){let t=0,n=Dt(0),r;return()=>{un()&&(i(n),nr(()=>(t===0&&(r=b(()=>e(()=>ln(n)))),t+=1,()=>{_n(()=>{t-=1,t===0&&(r?.(),r=void 0,ln(n))})})))}}var Ks=Jt|Qt|Mn;function Ys(e,t,n){new Js(e,t,n)}class Js{parent;#e=!1;#t;#r=null;#n;#l;#a;#s=null;#i=null;#o=null;#f=null;#u=null;#c=0;#d=0;#_=!1;#v=null;#b=Vs(()=>(this.#v=Dt(this.#c),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#l=r,this.parent=j.b,this.#e=!!this.#n.pending,this.#a=rr(()=>{j.b=this;{var s=this.#g();try{this.#s=Fe(()=>r(s))}catch(a){this.error(a)}this.#d>0?this.#p():this.#e=!1}return()=>{this.#u?.remove()}},Ks)}#y(){try{this.#s=Fe(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#n.pending;t&&(this.#i=Fe(()=>t(this.#t)),Je.enqueue(()=>{var n=this.#g();this.#s=this.#h(()=>(Je.ensure(),Fe(()=>this.#l(n)))),this.#d>0?this.#p():(Yt(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=yt(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#h(t){var n=j,r=R,s=ee;Ge(this.#a),Me(this.#a),Wt(this.#a.ctx);try{return t()}catch(a){return Or(a),null}finally{Ge(n),Me(r),Wt(s)}}#p(){const t=this.#n.pending;this.#s!==null&&(this.#f=document.createDocumentFragment(),this.#f.append(this.#u),Qr(this.#s,this.#f)),this.#i===null&&(this.#i=Fe(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#i&&Yt(this.#i,()=>{this.#i=null}),this.#f&&(this.#t.before(this.#f),this.#f=null))}update_pending_count(t){this.#m(t),this.#c+=t,this.#v&&Xt(this.#v,this.#c)}get_effect_pending(){return this.#b(),i(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#_||!n&&!r)throw t;this.#s&&(Ce(this.#s),this.#s=null),this.#i&&(Ce(this.#i),this.#i=null),this.#o&&(Ce(this.#o),this.#o=null);var s=!1,a=!1;const l=()=>{if(s){js();return}s=!0,a&&Ms(),Je.ensure(),this.#c=0,this.#o!==null&&Yt(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#s=this.#h(()=>(this.#_=!1,Fe(()=>this.#l(this.#t)))),this.#d>0?this.#p():this.#e=!1};var f=R;try{Me(null),a=!0,n?.(t,l),a=!1}catch(o){Gt(o,this.#a&&this.#a.parent)}finally{Me(f)}r&&_n(()=>{this.#o=this.#h(()=>{Je.ensure(),this.#_=!0;try{return Fe(()=>{r(this.#t,()=>t,()=>l)})}catch(o){return Gt(o,this.#a.parent),null}finally{this.#_=!1}})})}}function on(e,t){return t}function Ws(e,t,n){for(var r=[],s=t.length,a=0;a<s;a++)sr(t[a].e,r,!0);Xr(r,()=>{var l=r.length===0&&n!==null;if(l){var f=n,o=f.parentNode;sa(o),o.append(f),e.items.clear(),Be(e,t[0].prev,t[s-1].next)}for(var u=0;u<s;u++){var c=t[u];l||(e.items.delete(c.k),Be(e,c.prev,c.next)),Ce(c.e,!l)}e.first===t[0]&&(e.first=t[0].prev)})}function _e(e,t,n,r,s,a=null){var l=e,f=new Map,o=null,u=(t&Mr)!==0,c=(t&Dr)!==0,h=(t&Ar)!==0;if(u){var v=e;l=v.appendChild(yt())}var d=null,E=fe(()=>{var S=n();return wr(S)?S:S==null?[]:Yn(S)}),w,_=!0;function k(){Gs(p,w,l,t,r),d!==null&&(w.length===0?(d.fragment?(l.before(d.fragment),d.fragment=null):ar(d.effect),x.first=d.effect):Yt(d.effect,()=>{d=null}))}var x=rr(()=>{w=i(E);for(var S=w.length,Y=new Set,N=Q,q=null,B=Hr(),U=0;U<S;U+=1){var ie=w[U],J=r(ie,U),ue=_?null:f.get(J);ue?(c&&Xt(ue.v,ie),h?Xt(ue.i,U):ue.i=U,B&&N.skipped_effects.delete(ue.e)):(ue=Xs(_?l:null,q,ie,J,U,s,t,n),_&&(ue.o=!0,q===null?o=ue:q.next=ue,q=ue),f.set(J,ue)),Y.add(J)}if(S===0&&a&&!d)if(_)d={fragment:null,effect:Fe(()=>a(l))};else{var He=document.createDocumentFragment(),ft=yt();He.append(ft),d={fragment:He,effect:Fe(()=>a(ft))}}if(!_)if(B){for(const[wt,ut]of f)Y.has(wt)||N.skipped_effects.add(ut.e);N.oncommit(k),N.ondiscard(()=>{})}else k();i(E)}),p={effect:x,items:f,first:o};_=!1}function Gs(e,t,n,r,s){var a=(r&Cs)!==0,l=t.length,f=e.items,o=e.first,u,c=null,h,v=[],d=[],E,w,_,k;if(a)for(k=0;k<l;k+=1)E=t[k],w=s(E,k),_=f.get(w),_.o&&(_.a?.measure(),(h??=new Set).add(_));for(k=0;k<l;k+=1){if(E=t[k],w=s(E,k),_=f.get(w),e.first??=_,!_.o){_.o=!0;var x=c?c.next:o;Be(e,c,_),Be(e,_,x),$n(_,x,n),c=_,v=[],d=[],o=c.next;continue}if((_.e.f&$e)!==0&&(ar(_.e),a&&(_.a?.unfix(),(h??=new Set).delete(_))),_!==o){if(u!==void 0&&u.has(_)){if(v.length<d.length){var p=d[0],S;c=p.prev;var Y=v[0],N=v[v.length-1];for(S=0;S<v.length;S+=1)$n(v[S],p,n);for(S=0;S<d.length;S+=1)u.delete(d[S]);Be(e,Y.prev,N.next),Be(e,c,Y),Be(e,N,p),o=p,c=N,k-=1,v=[],d=[]}else u.delete(_),$n(_,o,n),Be(e,_.prev,_.next),Be(e,_,c===null?e.first:c.next),Be(e,c,_),c=_;continue}for(v=[],d=[];o!==null&&o.k!==w;)(o.e.f&$e)===0&&(u??=new Set).add(o),d.push(o),o=o.next;if(o===null)continue;_=o}v.push(_),c=_,o=_.next}let q=f.size>l;if(o!==null||u!==void 0){for(var B=u===void 0?[]:Yn(u);o!==null;)(o.e.f&$e)===0&&B.push(o),o=o.next;var U=B.length;if(q=f.size-U>l,U>0){var ie=(r&Mr)!==0&&l===0?n:null;if(a){for(k=0;k<U;k+=1)B[k].a?.measure();for(k=0;k<U;k+=1)B[k].a?.fix()}Ws(e,B,ie)}}if(q)for(const J of f.values())J.o||(Be(e,c,J),c=J);e.effect.last=c&&c.e,a&&_n(()=>{if(h!==void 0)for(_ of h)_.a?.apply()})}function Xs(e,t,n,r,s,a,l,f){var o=(l&Dr)!==0,u=(l&Is)===0,c=o?u?H(n,!1,!1):Dt(n):n,h=(l&Ar)===0?s:Dt(s),v={i:h,v:c,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var d=document.createDocumentFragment();d.append(e=yt())}return v.e=Fe(()=>a(e,c,h,f)),t!==null&&(t.next=v),v}finally{}}function $n(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==null&&a!==r;){var l=hn(a);s.before(a),a=l}}function Be(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function Zs(e,t,n,r){const s=vn()?Zn:fe;if(n.length===0&&e.length===0){r(t.map(s));return}var a=Q,l=j,f=Qs();function o(){Promise.all(n.map(u=>ea(u))).then(u=>{f();try{r([...t.map(s),...u])}catch(c){(l.f&st)===0&&Gt(c,l)}a?.deactivate(),xn()}).catch(u=>{Gt(u,l)})}e.length>0?Promise.all(e).then(()=>{f();try{return o()}finally{a?.deactivate(),xn()}}):o()}function Qs(){var e=j,t=R,n=ee,r=Q;return function(a=!0){Ge(e),Me(t),Wt(n),a&&r?.activate()}}function xn(){Ge(null),Me(null),Wt(null)}function Zn(e){var t=be|Ie,n=R!==null&&(R.f&be)!==0?R:null;return j!==null&&(j.f|=Qt),{ctx:ee,deps:null,effects:null,equals:Cr,f:t,fn:e,reactions:null,rv:0,v:we,wv:0,parent:n??j,ac:null}}function ea(e,t){let n=j;n===null&&ws();var r=n.b,s=void 0,a=Dt(we),l=!R,f=new Map;return la(()=>{var o=xr();s=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{u===Q&&u.committed&&u.deactivate(),xn()})}catch(v){o.reject(v),xn()}var u=Q;if(l){var c=!r.is_pending();r.update_pending_count(1),u.increment(c),f.get(u)?.reject(Bt),f.delete(u),f.set(u,o)}const h=(v,d=void 0)=>{if(u.activate(),d)d!==Bt&&(a.f|=gt,Xt(a,d));else{(a.f&gt)!==0&&(a.f^=gt),Xt(a,v);for(const[E,w]of f){if(f.delete(E),E===u)break;w.reject(Bt)}}l&&(r.update_pending_count(-1),u.decrement(c))};o.promise.then(h,v=>h(null,v||"unknown"))}),tr(()=>{for(const o of f.values())o.reject(Bt)}),new Promise(o=>{function u(c){function h(){c===s?o(a):u(s)}c.then(h,h)}u(s)})}function fe(e){const t=Zn(e);return t.equals=Nr,t}function Lr(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ce(t[n])}}function ta(e){for(var t=e.parent;t!==null;){if((t.f&be)===0)return(t.f&st)===0?t:null;t=t.parent}return null}function Qn(e){var t,n=j;Ge(ta(e));try{e.f&=~Tt,Lr(e),t=rs(e)}finally{Ge(n)}return t}function Fr(e){var t=Qn(e);if(e.equals(t)||(Q?.is_fork||(e.v=t),e.wv=ts()),!It)if(je!==null)(un()||Q?.is_fork)&&je.set(e,t);else{var n=(e.f&Ue)===0?Xe:ge;me(e,n)}}let jn=new Set;const mt=new Map;let jr=!1;function Dt(e,t){var n={f:0,v:e,reactions:null,equals:Cr,rv:0,wv:0};return n}function _t(e,t){const n=Dt(e);return ua(n),n}function H(e,t=!1,n=!0){const r=Dt(e);return t||(r.equals=Nr),en&&n&&ee!==null&&ee.l!==null&&(ee.l.s??=[]).push(r),r}function M(e,t,n=!1){R!==null&&(!We||(R.f&ur)!==0)&&vn()&&(R.f&(be|it|Gn|ur))!==0&&!at?.includes(e)&&As();let r=n?Ht(t):t;return Xt(e,r)}function Xt(e,t){if(!e.equals(t)){var n=e.v;It?mt.set(e,t):mt.set(e,n),e.v=t;var r=Je.ensure();r.capture(e,n),(e.f&be)!==0&&((e.f&Ie)!==0&&Qn(e),me(e,(e.f&Ue)!==0?ge:Xe)),e.wv=ts(),zr(e,Ie),vn()&&j!==null&&(j.f&ge)!==0&&(j.f&(ot|At))===0&&(Le===null?ca([e]):Le.push(e)),!r.is_fork&&jn.size>0&&!jr&&na()}return t}function na(){jr=!1;var e=bt;Sn(!0);const t=Array.from(jn);try{for(const n of t)(n.f&ge)!==0&&me(n,Xe),tn(n)&&Zt(n)}finally{Sn(e)}jn.clear()}function ln(e){M(e,e.v+1)}function zr(e,t){var n=e.reactions;if(n!==null)for(var r=vn(),s=n.length,a=0;a<s;a++){var l=n[a],f=l.f;if(!(!r&&l===j)){var o=(f&Ie)===0;if(o&&me(l,t),(f&be)!==0){var u=l;je?.delete(u),(f&Tt)===0&&(f&Ue&&(l.f|=Tt),zr(u,Xe))}else o&&((f&it)!==0&&nt!==null&&nt.add(l),Pt(l))}}}function Ht(e){if(typeof e!="object"||e===null||Kt in e)return e;const t=Jn(e);if(t!==hs&&t!==ps)return e;var n=new Map,r=wr(e),s=_t(0),a=xt,l=f=>{if(xt===a)return f();var o=R,u=xt;Me(null),vr(a);var c=f();return Me(o),vr(u),c};return r&&n.set("length",_t(e.length)),new Proxy(e,{defineProperty(f,o,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ps();var c=n.get(o);return c===void 0?c=l(()=>{var h=_t(u.value);return n.set(o,h),h}):M(c,u.value,!0),!0},deleteProperty(f,o){var u=n.get(o);if(u===void 0){if(o in f){const c=l(()=>_t(we));n.set(o,c),ln(s)}}else M(u,we),ln(s);return!0},get(f,o,u){if(o===Kt)return e;var c=n.get(o),h=o in f;if(c===void 0&&(!h||Vt(f,o)?.writable)&&(c=l(()=>{var d=Ht(h?f[o]:we),E=_t(d);return E}),n.set(o,c)),c!==void 0){var v=i(c);return v===we?void 0:v}return Reflect.get(f,o,u)},getOwnPropertyDescriptor(f,o){var u=Reflect.getOwnPropertyDescriptor(f,o);if(u&&"value"in u){var c=n.get(o);c&&(u.value=i(c))}else if(u===void 0){var h=n.get(o),v=h?.v;if(h!==void 0&&v!==we)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(f,o){if(o===Kt)return!0;var u=n.get(o),c=u!==void 0&&u.v!==we||Reflect.has(f,o);if(u!==void 0||j!==null&&(!c||Vt(f,o)?.writable)){u===void 0&&(u=l(()=>{var v=c?Ht(f[o]):we,d=_t(v);return d}),n.set(o,u));var h=i(u);if(h===we)return!1}return c},set(f,o,u,c){var h=n.get(o),v=o in f;if(r&&o==="length")for(var d=u;d<h.v;d+=1){var E=n.get(d+"");E!==void 0?M(E,we):d in f&&(E=l(()=>_t(we)),n.set(d+"",E))}if(h===void 0)(!v||Vt(f,o)?.writable)&&(h=l(()=>_t(void 0)),M(h,Ht(u)),n.set(o,h));else{v=h.v!==we;var w=l(()=>Ht(u));M(h,w)}var _=Reflect.getOwnPropertyDescriptor(f,o);if(_?.set&&_.set.call(c,u),!v){if(r&&typeof o=="string"){var k=n.get("length"),x=Number(o);Number.isInteger(x)&&x>=k.v&&M(k,x+1)}ln(s)}return!0},ownKeys(f){i(s);var o=Reflect.ownKeys(f).filter(h=>{var v=n.get(h);return v===void 0||v.v!==we});for(var[u,c]of n)c.v!==we&&!(u in f)&&o.push(u);return o},setPrototypeOf(){Ds()}})}var zn,qr,Br,Ur;function ra(){if(zn===void 0){zn=window,qr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Br=Vt(t,"firstChild").get,Ur=Vt(t,"nextSibling").get,fr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),fr(n)&&(n.__t=void 0)}}function yt(e=""){return document.createTextNode(e)}function ht(e){return Br.call(e)}function hn(e){return Ur.call(e)}function D(e,t){return ht(e)}function ne(e,t=!1){{var n=ht(e);return n instanceof Comment&&n.data===""?hn(n):n}}function O(e,t=1,n=!1){let r=e;for(;t--;)r=hn(r);return r}function sa(e){e.textContent=""}function Hr(){return!1}function er(e){var t=R,n=j;Me(null),Ge(null);try{return e()}finally{Me(t),Ge(n)}}function Vr(e){j===null&&(R===null&&xs(),ks()),It&&Es()}function aa(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function lt(e,t,n){var r=j;r!==null&&(r.f&$e)!==0&&(e|=$e);var s={ctx:ee,deps:null,nodes_start:null,nodes_end:null,f:e|Ie|Ue,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Zt(s),s.f|=Wn}catch(f){throw Ce(s),f}else t!==null&&Pt(s);var a=s;if(n&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&Qt)===0&&(a=a.first,(e&it)!==0&&(e&Jt)!==0&&a!==null&&(a.f|=Jt)),a!==null&&(a.parent=r,r!==null&&aa(a,r),R!==null&&(R.f&be)!==0&&(e&At)===0)){var l=R;(l.effects??=[]).push(a)}return s}function un(){return R!==null&&!We}function tr(e){const t=lt(An,null,!1);return me(t,ge),t.teardown=e,t}function qn(e){Vr();var t=j.f,n=!R&&(t&ot)!==0&&(t&Wn)===0;if(n){var r=ee;(r.e??=[]).push(e)}else return Kr(e)}function Kr(e){return lt(Sr|Pr,e,!1)}function ia(e){return Vr(),lt(An|Pr,e,!0)}function oa(e){Je.ensure();const t=lt(At|Qt,e,!0);return(n={})=>new Promise(r=>{n.outro?Yt(t,()=>{Ce(t),r(void 0)}):(Ce(t),r(void 0))})}function le(e,t){var n=ee,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=nr(()=>{e(),!r.ran&&(r.ran=!0,b(t))})}function pn(){var e=ee;nr(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&ge)!==0&&me(n,Xe),tn(n)&&Zt(n),t.ran=!1}})}function la(e){return lt(Gn|Qt,e,!0)}function nr(e,t=0){return lt(An|t,e,!0)}function X(e,t=[],n=[],r=[]){Zs(r,t,n,s=>{lt(An,()=>e(...s.map(i)),!0)})}function rr(e,t=0){var n=lt(it|t,e,!0);return n}function Fe(e){return lt(ot|Qt,e,!0)}function Yr(e){var t=e.teardown;if(t!==null){const n=It,r=R;dr(!0),Me(null);try{t.call(null)}finally{dr(n),Me(r)}}}function Jr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&er(()=>{s.abort(Bt)});var r=n.next;(n.f&At)!==0?n.parent=null:Ce(n,t),n=r}}function fa(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ot)===0&&Ce(t),t=n}}function Ce(e,t=!0){var n=!1;(t||(e.f&Tr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Wr(e.nodes_start,e.nodes_end),n=!0),Jr(e,t&&!n),Tn(e,0),me(e,st);var r=e.transitions;if(r!==null)for(const a of r)a.stop();Yr(e);var s=e.parent;s!==null&&s.first!==null&&Gr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Wr(e,t){for(;e!==null;){var n=e===t?null:hn(e);e.remove(),e=n}}function Gr(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Yt(e,t,n=!0){var r=[];sr(e,r,!0),Xr(r,()=>{n&&Ce(e),t&&t()})}function Xr(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function sr(e,t,n){if((e.f&$e)===0){if(e.f^=$e,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var s=r.next,a=(r.f&Jt)!==0||(r.f&ot)!==0&&(e.f&it)!==0;sr(r,t,a?n:!1),r=s}}}function ar(e){Zr(e,!0)}function Zr(e,t){if((e.f&$e)!==0){e.f^=$e,(e.f&ge)===0&&(me(e,Ie),Pt(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Jt)!==0||(n.f&ot)!==0;Zr(n,s?t:!1),n=r}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}function Qr(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:hn(n);t.append(n),n=s}}let bt=!1;function Sn(e){bt=e}let It=!1;function dr(e){It=e}let R=null,We=!1;function Me(e){R=e}let j=null;function Ge(e){j=e}let at=null;function ua(e){R!==null&&(at===null?at=[e]:at.push(e))}let Se=null,Oe=0,Le=null;function ca(e){Le=e}let es=1,cn=0,xt=cn;function vr(e){xt=e}function ts(){return++es}function tn(e){var t=e.f;if((t&Ie)!==0)return!0;if(t&be&&(e.f&=~Tt),(t&Xe)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var a=n[s];if(tn(a)&&Fr(a),a.wv>e.wv)return!0}(t&Ue)!==0&&je===null&&me(e,ge)}return!1}function ns(e,t,n=!0){var r=e.reactions;if(r!==null&&!at?.includes(e))for(var s=0;s<r.length;s++){var a=r[s];(a.f&be)!==0?ns(a,t,!1):t===a&&(n?me(a,Ie):(a.f&ge)!==0&&me(a,Xe),Pt(a))}}function rs(e){var t=Se,n=Oe,r=Le,s=R,a=at,l=ee,f=We,o=xt,u=e.f;Se=null,Oe=0,Le=null,R=(u&(ot|At))===0?e:null,at=null,Wt(e.ctx),We=!1,xt=++cn,e.ac!==null&&(er(()=>{e.ac.abort(Bt)}),e.ac=null);try{e.f|=Ln;var c=e.fn,h=c(),v=e.deps;if(Se!==null){var d;if(Tn(e,Oe),v!==null&&Oe>0)for(v.length=Oe+Se.length,d=0;d<Se.length;d++)v[Oe+d]=Se[d];else e.deps=v=Se;if(bt&&un()&&(e.f&Ue)!==0)for(d=Oe;d<v.length;d++)(v[d].reactions??=[]).push(e)}else v!==null&&Oe<v.length&&(Tn(e,Oe),v.length=Oe);if(vn()&&Le!==null&&!We&&v!==null&&(e.f&(be|Xe|Ie))===0)for(d=0;d<Le.length;d++)ns(Le[d],e);return s!==null&&s!==e&&(cn++,Le!==null&&(r===null?r=Le:r.push(...Le))),(e.f&gt)!==0&&(e.f^=gt),h}catch(E){return Or(E)}finally{e.f^=Ln,Se=t,Oe=n,Le=r,R=s,at=a,Wt(l),We=f,xt=o}}function da(e,t){let n=t.reactions;if(n!==null){var r=_s.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&be)!==0&&(Se===null||!Se.includes(t))&&(me(t,Xe),(t.f&Ue)!==0&&(t.f^=Ue,t.f&=~Tt),Lr(t),Tn(t,0))}function Tn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)da(e,n[r])}function Zt(e){var t=e.f;if((t&st)===0){me(e,ge);var n=j,r=bt;j=e,bt=!0;try{(t&(it|ms))!==0?fa(e):Jr(e),Yr(e);var s=rs(e);e.teardown=typeof s=="function"?s:null,e.wv=es;var a;Rn&&zs&&(e.f&Ie)!==0&&e.deps}finally{bt=r,j=n}}}function i(e){var t=e.f,n=(t&be)!==0;if(R!==null&&!We){var r=j!==null&&(j.f&st)!==0;if(!r&&!at?.includes(e)){var s=R.deps;if((R.f&Ln)!==0)e.rv<cn&&(e.rv=cn,Se===null&&s!==null&&s[Oe]===e?Oe++:Se===null?Se=[e]:Se.includes(e)||Se.push(e));else{(R.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[R]:a.includes(R)||a.push(R)}}}if(It){if(mt.has(e))return mt.get(e);if(n){var l=e,f=l.v;return((l.f&ge)===0&&l.reactions!==null||as(l))&&(f=Qn(l)),mt.set(l,f),f}}else n&&(!je?.has(e)||Q?.is_fork&&!un())&&(l=e,tn(l)&&Fr(l),bt&&un()&&(l.f&Ue)===0&&ss(l));if(je?.has(e))return je.get(e);if((e.f&gt)!==0)throw e.v;return e.v}function ss(e){if(e.deps!==null){e.f^=Ue;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&be)!==0&&(t.f&Ue)===0&&ss(t)}}function as(e){if(e.v===we)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(mt.has(t)||(t.f&be)!==0&&as(t))return!0;return!1}function b(e){var t=We;try{return We=!0,e()}finally{We=t}}const va=-7169;function me(e,t){e.f=e.f&va|t}function C(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Kt in e)Bn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Kt in n&&Bn(n)}}}function Bn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Bn(e[r],t)}catch{}const n=Jn(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=kr(n);for(let s in r){const a=r[s].get;if(a)try{a.call(e)}catch{}}}}}const _a=["touchstart","touchmove"];function ha(e){return _a.includes(e)}const pa=new Set,_r=new Set;function ga(e,t,n,r={}){function s(a){if(r.capture||an.call(t,a),!a.cancelBubble)return er(()=>n?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?_n(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function A(e,t,n,r,s){var a={capture:r,passive:s},l=ga(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&tr(()=>{t.removeEventListener(e,l,a)})}let hr=null;function an(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],a=s[0]||e.target;hr=e;var l=0,f=hr===e&&e.__root;if(f){var o=s.indexOf(f);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;o<=u&&(l=o)}if(a=s[l]||e.target,a!==t){Er(e,"currentTarget",{configurable:!0,get(){return a||n}});var c=R,h=j;Me(null),Ge(null);try{for(var v,d=[];a!==null;){var E=a.assignedSlot||a.parentNode||a.host||null;try{var w=a["__"+r];w!=null&&(!a.disabled||e.target===a)&&w.call(a,e)}catch(_){v?d.push(_):v=_}if(e.cancelBubble||E===t||E===null)break;a=E}if(v){for(let _ of d)queueMicrotask(()=>{throw _});throw v}}finally{e.__root=t,delete e.currentTarget,Me(c),Ge(h)}}}function is(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","\x3C!---->"),t.content}function Pn(e,t){var n=j;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function I(e,t){var n=(t&Rs)!==0,r=(t&Ls)!==0,s,a=!e.startsWith("<!>");return()=>{s===void 0&&(s=is(a?e:"<!>"+e),n||(s=ht(s)));var l=r||qr?document.importNode(s,!0):s.cloneNode(!0);if(n){var f=ht(l),o=l.lastChild;Pn(f,o)}else Pn(l,l);return l}}function Ae(){var e=document.createDocumentFragment(),t=document.createComment(""),n=yt();return e.append(t,n),Pn(t,n),e}function T(e,t){e!==null&&e.before(t)}function se(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ma(e,t){return ba(e,t)}const jt=new Map;function ba(e,{target:t,anchor:n,props:r={},events:s,context:a,intro:l=!0}){ra();var f=new Set,o=h=>{for(var v=0;v<h.length;v++){var d=h[v];if(!f.has(d)){f.add(d);var E=ha(d);t.addEventListener(d,an,{passive:E});var w=jt.get(d);w===void 0?(document.addEventListener(d,an,{passive:E}),jt.set(d,1)):jt.set(d,w+1)}}};o(Yn(pa)),_r.add(o);var u=void 0,c=oa(()=>{var h=n??t.appendChild(yt());return Ys(h,{pending:()=>{}},v=>{if(a){Mt({});var d=ee;d.c=a}s&&(r.$$events=s),u=e(v,r)||{},a&&Ct()}),()=>{for(var v of f){t.removeEventListener(v,an);var d=jt.get(v);--d===0?(document.removeEventListener(v,an),jt.delete(v)):jt.set(v,d)}_r.delete(o),h!==n&&h.parentNode?.removeChild(h)}});return ya.set(u,c),u}let ya=new WeakMap;class wa{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#a=()=>{var t=Q;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)ar(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#t.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[a,l]of this.#e){if(this.#e.delete(a),a===t)break;const f=this.#r.get(l);f&&(Ce(f.effect),this.#r.delete(l))}for(const[a,l]of this.#t){if(a===n||this.#n.has(a))continue;const f=()=>{if(Array.from(this.#e.values()).includes(a)){var u=document.createDocumentFragment();Qr(l,u),u.append(yt()),this.#r.set(a,{effect:l,fragment:u})}else Ce(l);this.#n.delete(a),this.#t.delete(a)};this.#l||!r?(this.#n.add(a),Yt(l,f,!1)):f()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,s]of this.#r)n.includes(r)||(Ce(s.effect),this.#r.delete(r))};ensure(t,n){var r=Q,s=Hr();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(s){var a=document.createDocumentFragment(),l=yt();a.append(l),this.#r.set(t,{effect:Fe(()=>n(l)),fragment:a})}else this.#t.set(t,Fe(()=>n(this.anchor)));if(this.#e.set(r,t),s){for(const[f,o]of this.#t)f===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[f,o]of this.#r)f===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#a),r.ondiscard(this.#s)}else this.#a()}}function ae(e,t,n=!1){var r=new wa(e),s=n?Jt:0;function a(l,f){r.ensure(l,f)}rr(()=>{var l=!1;t((f,o=!0)=>{l=!0,a(o,f)}),l||a(!1,null)},s)}function pr(e,t,n=!1,r=!1,s=!1){var a=e,l="";X(()=>{var f=j;if(l!==(l=t()??"")&&(f.nodes_start!==null&&(Wr(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),l!=="")){var o=l+"";n?o=`<svg>${o}</svg>`:r&&(o=`<math>${o}</math>`);var u=is(o);if((n||r)&&(u=ht(u)),Pn(ht(u),u.lastChild),n||r)for(;ht(u);)a.before(ht(u));else a.before(u)}})}const gr=[...` 	
\r\f \v\uFEFF`];function Ea(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var a=s.length,l=0;(l=r.indexOf(s,l))>=0;){var f=l+a;(l===0||gr.includes(r[l-1]))&&(f===r.length||gr.includes(r[f]))?r=(l===0?"":r.substring(0,l))+r.substring(f+1):l=f}}return r===""?null:r}function ka(e,t){return e==null?null:String(e)}function xe(e,t,n,r,s,a){var l=e.__className;if(l!==n||l===void 0){var f=Ea(n,r,a);f==null?e.removeAttribute("class"):e.className=f,e.__className=n}else if(a&&s!==a)for(var o in a){var u=!!a[o];(s==null||u!==!!s[o])&&e.classList.toggle(o,u)}return a}function dn(e,t,n,r){var s=e.__style;if(s!==t){var a=ka(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return r}const xa=Symbol("is custom element"),Sa=Symbol("is html");function Ta(e,t,n,r){var s=Pa(e);s[t]!==(s[t]=n)&&(n==null?e.removeAttribute(t):typeof n!="string"&&Da(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Pa(e){return e.__attributes??={[xa]:e.nodeName.includes("-"),[Sa]:e.namespaceURI===Fs}}var mr=new Map;function Da(e){var t=e.getAttribute("is")||e.nodeName,n=mr.get(t);if(n)return n;mr.set(t,n=[]);for(var r,s=e,a=Element.prototype;a!==s;){r=kr(s);for(var l in r)r[l].set&&n.push(l);s=Jn(s)}return n}function nn(e=!1){const t=ee,n=t.l.u;if(!n)return;let r=()=>C(t.s);if(e){let s=0,a={};const l=Zn(()=>{let f=!1;const o=t.s;for(const u in o)o[u]!==a[u]&&(a[u]=o[u],f=!0);return f&&s++,s});r=()=>i(l)}n.b.length&&ia(()=>{br(t,r),kn(n.b)}),qn(()=>{const s=b(()=>n.m.map(gs));return()=>{for(const a of s)typeof a=="function"&&a()}}),n.a.length&&qn(()=>{br(t,r),kn(n.a)})}function br(e,t){if(e.l.s)for(const n of e.l.s)i(n);t()}function ir(e,t,n){if(e==null)return t(void 0),n&&n(void 0),pt;const r=b(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const zt=[];function Aa(e,t){return{subscribe:Cn(e,t).subscribe}}function Cn(e,t=pt){let n=null;const r=new Set;function s(f){if(Ir(e,f)&&(e=f,n)){const o=!zt.length;for(const u of r)u[1](),zt.push(u,e);if(o){for(let u=0;u<zt.length;u+=2)zt[u][0](zt[u+1]);zt.length=0}}}function a(f){s(f(e))}function l(f,o=pt){const u=[f,o];return r.add(u),r.size===1&&(n=t(s,a)||pt),f(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:s,update:a,subscribe:l}}function Ma(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return Aa(n,(l,f)=>{let o=!1;const u=[];let c=0,h=pt;const v=()=>{if(c)return;h();const E=t(r?u[0]:u,l,f);a?l(E):h=typeof E=="function"?E:pt},d=s.map((E,w)=>ir(E,_=>{u[w]=_,c&=~(1<<w),o&&v()},()=>{c|=1<<w}));return o=!0,v(),function(){kn(d),h(),o=!1}})}function Ca(e){let t;return ir(e,n=>t=n)(),t}let wn=!1,Un=Symbol();function fn(e,t,n){const r=n[t]??={store:null,source:H(void 0),unsubscribe:pt};if(r.store!==e&&!(Un in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=pt;else{var s=!0;r.unsubscribe=ir(e,a=>{s?r.source.v=a:M(r.source,a)}),s=!1}return e&&Un in n?Ca(e):i(r.source)}function or(){const e={};function t(){tr(()=>{for(var n in e)e[n].unsubscribe();Er(e,Un,{enumerable:!1,value:!0})})}return[e,t]}function Ia(e){var t=wn;try{return wn=!1,[e(),wn]}finally{wn=t}}function rt(e,t,n,r){var s=!en||(n&Ns)!==0,a=(n&$s)!==0,l=r,f=!0,o=()=>(f&&(f=!1,l=r),l),u;{var c=Kt in e||bs in e;u=Vt(e,t)?.set??(c&&t in e?x=>e[t]=x:void 0)}var h,v=!1;[h,v]=Ia(()=>e[t]),h===void 0&&r!==void 0&&(h=o(),u&&(s&&Ts(),u(h)));var d;if(s?d=()=>{var x=e[t];return x===void 0?o():(f=!0,x)}:d=()=>{var x=e[t];return x!==void 0&&(l=void 0),x===void 0?l:x},s&&(n&Os)===0)return d;if(u){var E=e.$$legacy;return(function(x,p){return arguments.length>0?((!s||!p||E||v)&&u(p?d():x),x):d()})}var w=!1,_=fe(()=>(w=!1,d()));i(_);var k=j;return(function(x,p){if(arguments.length>0){const S=p?i(_):s&&a?Ht(x):x;return M(_,S),w=!0,l!==void 0&&(l=S),x}return It&&w||(k.f&st)!==0?_.v:i(_)})}function Na(e){ee===null&&ys(),en&&ee.l!==null?Oa(ee).m.push(e):qn(()=>{const t=b(e);if(typeof t=="function")return t})}function Oa(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const $a="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add($a);qs();const St=Cn({}),En=Cn([]),qt=Cn([]),Ra=Ma(St,e=>Object.values(e).find(t=>t.parent==="user"));Ra.subscribe(e=>{e&&qt.update(t=>t.length===0?[{id:0,agentIds:[e.id]}]:t)});function os(e,t){const{agents:n,messages:r,hooksByParent:s,toolResults:a}=t;if(e.event_type==="agent_created"){if(!n[e.agent]){if(n[e.agent]={id:e.agent,name:e.name,parent:e.parent,children:[],systemPrompts:[],isHook:e.role==="hook",hookCount:0,hooks:[]},e.role==="hook"&&e.parent&&(s.has(e.parent)||s.set(e.parent,[]),s.get(e.parent).push(e.agent),n[e.parent])){const f=s.get(e.parent)||[];n[e.parent].hookCount=f.length,n[e.parent].hooks=f}e.parent&&e.parent!=="user"&&n[e.parent]&&e.role!=="hook"&&(n[e.parent].children.includes(e.agent)||n[e.parent].children.push(e.agent));const l=s.get(e.agent)||[];l.length>0&&(n[e.agent].hookCount=l.length,n[e.agent].hooks=l)}}else if(e.event_type==="transcript_entry"){if(e.role==="system"&&n[e.agent]){n[e.agent].systemPrompts.push(e.content);return}if(e.role==="tool"&&e.tool_call_id){a.set(e.tool_call_id,e);return}if(e.role==="user"){const l={id:e.message_id,agent:e.agent,role:"user",content:e.content,substance:e.substance};if(e.content.startsWith("<system>")){l.isSystemRejection=!0;const f=e.content.match(/<system>(.*?)<\/system>/s);f&&(l.rejectionReason=f[1].trim());for(let o=r.length-1;o>=0;o--)if(r[o].agent===e.agent&&r[o].role==="assistant"){r[o].isFailed=!0;break}}r.push(l)}else if(e.role==="assistant"&&e.tool_calls){const l=e.tool_calls.map(f=>{const o=a.get(f.id),u={...f};return o&&(u.result={role:o.role,content:o.content,name:o.name}),u});r.push({id:e.message_id,agent:e.agent,role:"assistant_tool_use",tool_calls:l,substance:e.substance})}else e.role==="assistant"&&!e.tool_calls&&r.push({id:e.message_id,agent:e.agent,role:"assistant",content:e.content,substance:e.substance})}}function yr(e){const n=e.split(`
`).filter(s=>s.trim()).map(s=>JSON.parse(s)),r={agents:{},messages:[],hooksByParent:new Map,toolResults:new Map};for(const s of n)os(s,r);return{agents:r.agents,messages:r.messages}}function La(e){const t=new Set,n=[];for(const r of e){if(r.substance){if(t.has(r.substance))continue;t.add(r.substance)}r.substance||t.add(r.id),n.push(r)}return n}function lr(e){const n=new TextEncoder().encode(e);let r=3735928559,s=1103547991;for(let a=0;a<n.length;a++){const l=n[a];r=Math.imul(r^l,2654435761),s=Math.imul(s^l,1597334677),r=r<<13|r>>>19,s=s<<17|s>>>15}return r=Math.imul(r^r>>>16,2246822507),r=Math.imul(r^r>>>13,3266489909),r=(r^r>>>16)>>>0,s=Math.imul(s^s>>>16,2246822507),s=Math.imul(s^s>>>13,3266489909),s=(s^s>>>16)>>>0,r+s>>>0}function Hn(e){return`hsl(${lr(e)%360}, 45%, 85%)`}function Dn(e){return`hsl(${lr(e)%360}, 60%, 35%)`}function Vn(e){return`hsl(${lr(e)%360}, 50%, 70%)`}var Fa=I('<span class="toggle svelte-1ulaew4" role="button" tabindex="0"> </span>'),ja=I('<span class="toggle-spacer svelte-1ulaew4"></span>'),za=I('<span class="hook-indicator svelte-1ulaew4" role="button" tabindex="0" draggable="true">H</span>'),qa=I('<span class="separator svelte-1ulaew4">▸</span> <!>',1),Ba=I('<div><div class="agent-item svelte-1ulaew4"><!> <span class="agent-badge svelte-1ulaew4" role="button" tabindex="0" draggable="true"> </span> <!> <!></div> <!></div>');function Kn(e,t){Mt(t,!1);const n=()=>fn(St,"$agents",r),[r,s]=or(),a=H(),l=H(),f=H(),o=H(),u=H(),c=H(),h=H(),v=H(),d=H();let E=rt(t,"agent",8),w=rt(t,"depth",8,0),_=rt(t,"inline",8,!1),k=H(!0);function x($){$.dataTransfer.effectAllowed="copy",$.dataTransfer.setData("application/json",JSON.stringify({agentId:E().id}))}function p($,ce){$.dataTransfer.effectAllowed="copy",$.dataTransfer.setData("application/json",JSON.stringify({agentId:ce}))}function S(){M(k,!i(k))}function Y($){($.key==="Enter"||$.key===" ")&&($.preventDefault(),S())}le(()=>C(E()),()=>{M(a,E().hookCount||0)}),le(()=>(C(E()),n()),()=>{M(l,(E().hooks||[]).map($=>n()[$]).filter(Boolean))}),le(()=>(C(E()),n()),()=>{M(f,E().children.map($=>n()[$]).filter(Boolean))}),le(()=>i(f),()=>{M(o,i(f).length>0)}),le(()=>i(f),()=>{M(u,i(f).length===1)}),le(()=>i(f),()=>{M(c,i(f).length>1)}),le(()=>C(E()),()=>{M(h,E().id+"_"+E().name)}),le(()=>i(h),()=>{M(v,Hn(i(h)))}),le(()=>i(h),()=>{M(d,Vn(i(h)))}),pn(),nn();var N=Ba();let q;var B=D(N),U=D(B);{var ie=$=>{var ce=Ae(),z=ne(ce);{var W=g=>{var y=Fa(),P=D(y);X(()=>se(P,i(k)?"▼":"▶")),A("click",y,S),A("keydown",y,Y),T(g,y)},m=g=>{var y=ja();T(g,y)};ae(z,g=>{i(c)?g(W):g(m,!1)})}T($,ce)};ae(U,$=>{_()||$(ie)})}var J=O(U,2),ue=D(J),He=O(J,2);_e(He,1,()=>i(l),$=>$.id,($,ce)=>{var z=za();X(()=>Ta(z,"title",`Hook: ${i(ce),b(()=>i(ce).name)??""}`)),A("dragstart",z,W=>p(W,i(ce).id)),T($,z)});var ft=O(He,2);{var wt=$=>{var ce=qa(),z=O(ne(ce),2);Kn(z,{get agent(){return i(f),b(()=>i(f)[0])},get depth(){return w()},inline:!0}),T($,ce)};ae(ft,$=>{i(u)&&$(wt)})}var ut=O(B,2);{var Nt=$=>{var ce=Ae(),z=ne(ce);_e(z,1,()=>i(f),W=>W.id,(W,m)=>{var g=Ae(),y=ne(g);{let P=fe(()=>w()+1);Kn(y,{get agent(){return i(m)},get depth(){return i(P)}})}T(W,g)}),T($,ce)};ae(ut,$=>{i(k)&&i(c)&&$(Nt)})}X(()=>{q=xe(N,1,"agent-node svelte-1ulaew4",null,q,{inline:_()}),dn(N,`margin-left: ${_()?0:w()*20}px`),dn(J,`background-color: ${i(v)??""}; border-color: ${i(d)??""};`),se(ue,(C(E()),b(()=>E().name)))}),A("dragstart",J,x),T(e,N),Ct(),s()}var Ua=I('<p class="empty svelte-5r6xef">No agents found in log</p>'),Ha=I('<div class="hierarchy svelte-5r6xef"><!></div>');function Va(e,t){Mt(t,!1);const n=()=>fn(St,"$agents",r),[r,s]=or(),a=H();le(()=>n(),()=>{M(a,Object.values(n()).filter(c=>c.parent==="user"))}),pn(),nn();var l=Ha(),f=D(l);{var o=c=>{var h=Ua();T(c,h)},u=c=>{var h=Ae(),v=ne(h);_e(v,1,()=>i(a),d=>d.id,(d,E)=>{Kn(d,{get agent(){return i(E)}})}),T(c,h)};ae(f,c=>{i(a),b(()=>i(a).length===0)?c(o):c(u,!1)})}T(e,l),Ct(),s()}var Ka=I('<div class="message-content system-rejection-content svelte-kszgzy"> </div>'),Ya=I('<div><span class="agent-prefix svelte-kszgzy"> </span> </div>'),Ja=I("<div> </div>"),Wa=I("<div><!></div>");function Ga(e,t){Mt(t,!1);const n=H(),r=H(),s=H(),a=H(),l=H(),f=H();let o=rt(t,"message",8),u=rt(t,"agentName",8,""),c=rt(t,"agentId",8,""),h=rt(t,"showPrefix",8,!1);le(()=>C(o()),()=>{M(n,o().role==="user")}),le(()=>C(o()),()=>{M(r,o().role==="assistant")}),le(()=>C(o()),()=>{M(s,o().isFailed||!1)}),le(()=>C(o()),()=>{M(a,o().isSystemRejection||!1)}),le(()=>(C(c()),C(u())),()=>{M(l,c()&&u()?c()+"_"+u():c())}),le(()=>(i(l),Dn),()=>{M(f,i(l)?Dn(i(l)):"#333")}),pn(),nn();var v=Wa();let d;var E=D(v);{var w=k=>{var x=Ka(),p=D(x);X(()=>se(p,(C(o()),b(()=>o().content)))),T(k,x)},_=k=>{var x=Ae(),p=ne(x);{var S=N=>{var q=Ya();let B;var U=D(q),ie=D(U),J=O(U);X(()=>{B=xe(q,1,"message-content svelte-kszgzy",null,B,{strikethrough:i(s)}),dn(U,`color: ${i(f)??""};`),se(ie,`[${u()??""}]:`),se(J,` ${C(o()),b(()=>o().content)??""}`)}),T(N,q)},Y=N=>{var q=Ja();let B;var U=D(q);X(()=>{B=xe(q,1,"message-content svelte-kszgzy",null,B,{strikethrough:i(s)}),se(U,(C(o()),b(()=>o().content)))}),T(N,q)};ae(p,N=>{i(r)&&h()&&u()?N(S):N(Y,!1)},!0)}T(k,x)};ae(E,k=>{i(a)?k(w):k(_,!1)})}X(()=>d=xe(v,1,"message svelte-kszgzy",null,d,{user:i(n),assistant:i(r),"system-rejection":i(a)})),T(e,v),Ct()}var Xa=I('<div class="field-line svelte-g00oa"><span class="field-name svelte-g00oa"> </span> </div>'),Za=I("<span>,</span>"),Qa=I("<button> </button><!>",1),ei=I('<div class="field-line svelte-g00oa"><span class="field-name svelte-g00oa"> </span> </div>'),ti=I('<div class="detail-line svelte-g00oa"><span class="field-name svelte-g00oa"> </span>: <!> </div>'),ni=I('<div class="detail-line svelte-g00oa"><span class="field-name svelte-g00oa"> </span>: <!> </div>'),ri=I('<hr class="divider svelte-g00oa"/> <div class="tool-result-details svelte-g00oa"><div class="details-display svelte-g00oa"></div></div>',1),si=I('<hr class="divider svelte-g00oa"/> <div class="tool-call-details svelte-g00oa"><div class="details-display svelte-g00oa"></div></div> <!>',1),ai=I('<div class="modal-backdrop svelte-g00oa" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-content svelte-g00oa"><div class="modal-header svelte-g00oa"><h2 class="svelte-g00oa">Tool Usage Details</h2> <button class="close-btn svelte-g00oa" aria-label="Close">&times;</button></div> <div class="modal-body svelte-g00oa"><div class="message-fields svelte-g00oa"><div class="fields-display svelte-g00oa"><!> <div class="field-line svelte-g00oa"><span class="field-name svelte-g00oa">tool_calls</span>: [ <!> <span> </span></div> <!></div></div> <!></div></div></div>');function ii(e,t){Mt(t,!1);const n=H();let r=rt(t,"toolUseMessage",8,null),s=rt(t,"onClose",8,()=>{}),a=H(null);function l(p){M(a,p)}function f(p){p.target===p.currentTarget&&s()()}function o(p){(p.key==="Enter"||p.key===" ")&&p.target===p.currentTarget&&(p.preventDefault(),s()())}function u(p){p.key==="Escape"&&s()()}function c(p){if(!p)return[];const S=[];return S.push({key:"message_id",value:`"${p.id}"`}),S.push({key:"event_type",value:'"transcript_entry"'}),S.push({key:"agent",value:`"${p.agent}"`}),S.push({key:"role",value:'"assistant"'}),S}function h(p){return!p||!p.substance?null:{key:"substance",value:`"${p.substance}"`}}function v(p,S=0){if(p==null)return"null";if(typeof p=="string")return`"${d(p)}"`;if(typeof p=="number"||typeof p=="boolean")return String(p);if(Array.isArray(p))return p.length===0?"[]":`[
`+p.map(N=>v(N,S+2)).map(N=>" ".repeat(S+2)+N).join(`,
`)+`
`+" ".repeat(S)+"]";if(typeof p=="object"){const Y=Object.entries(p);return Y.length===0?"{}":`{
`+Y.map(([q,B])=>{const U=" ".repeat(S+2),ie=v(B,S+2);return`${U}<b>${d(q)}</b>: ${ie}`}).join(`,
`)+`
`+" ".repeat(S)+"}"}return String(p)}function d(p){const S=document.createElement("div");return S.textContent=p,S.innerHTML}function E(p){if(!p)return[];const{result:S,...Y}=p;return Object.entries(Y).map(([N,q])=>({key:N,value:v(q,0)}))}function w(p){return p?Object.entries(p).map(([S,Y])=>({key:S,value:v(Y,0)})):[]}le(()=>C(r()),()=>{r()&&r().tool_calls&&r().tool_calls.length>0?M(a,0):M(a,null)}),le(()=>(i(a),C(r())),()=>{M(n,i(a)!==null?r()?.tool_calls[i(a)]:null)}),pn(),nn();var _=Ae();A("keydown",zn,u);var k=ne(_);{var x=p=>{var S=ai(),Y=D(S),N=D(Y),q=O(D(N),2),B=O(N,2),U=D(B),ie=D(U),J=D(ie);_e(J,1,()=>(C(r()),b(()=>c(r()))),on,(z,W)=>{var m=Xa(),g=D(m),y=D(g),P=O(g);X(()=>{se(y,(i(W),b(()=>i(W).key))),se(P,`: ${i(W),b(()=>i(W).value)??""},`)}),T(z,m)});var ue=O(J,2),He=O(D(ue),2);_e(He,3,()=>(C(r()),b(()=>r().tool_calls)),z=>z.id,(z,W,m)=>{var g=Qa(),y=ne(g);let P;var L=D(y),V=O(y);{var Ee=F=>{var Te=Za();T(F,Te)};ae(V,F=>{C(i(m)),C(r()),b(()=>i(m)<r().tool_calls.length-1)&&F(Ee)})}X(()=>{P=xe(y,1,"inline-tool-button svelte-g00oa",null,P,{selected:i(a)===i(m)}),se(L,(i(W),b(()=>i(W).function?.name||"unknown")))}),A("click",y,()=>l(i(m))),T(z,g)});var ft=O(He,2),wt=D(ft),ut=O(ue,2);{var Nt=z=>{const W=fe(()=>(C(r()),b(()=>h(r()))));var m=ei(),g=D(m),y=D(g),P=O(g);X(()=>{se(y,(C(i(W)),b(()=>i(W).key))),se(P,`: ${C(i(W)),b(()=>i(W).value)??""}`)}),T(z,m)};ae(ut,z=>{C(r()),b(()=>h(r()))&&z(Nt)})}var $=O(U,2);{var ce=z=>{var W=si(),m=O(ne(W),2),g=D(m);_e(g,5,()=>(i(n),b(()=>E(i(n)))),on,(L,V,Ee)=>{var F=ti(),Te=D(F),te=D(Te),ze=O(Te,2);pr(ze,()=>(i(V),b(()=>i(V).value)));var Ze=O(ze,1,!0);X(Ot=>{se(te,(i(V),b(()=>i(V).key))),se(Ze,Ot)},[()=>(i(n),b(()=>Ee<E(i(n)).length-1?",":""))]),T(L,F)});var y=O(m,2);{var P=L=>{var V=ri(),Ee=O(ne(V),2),F=D(Ee);_e(F,5,()=>(i(n),b(()=>w(i(n).result))),on,(Te,te,ze)=>{var Ze=ni(),Ot=D(Ze),In=D(Ot),G=O(Ot,2);pr(G,()=>(i(te),b(()=>i(te).value)));var Z=O(G,1,!0);X(qe=>{se(In,(i(te),b(()=>i(te).key))),se(Z,qe)},[()=>(i(n),b(()=>ze<w(i(n).result).length-1?",":""))]),T(Te,Ze)}),T(L,V)};ae(y,L=>{i(n),b(()=>i(n).result)&&L(P)})}T(z,W)};ae($,z=>{i(n)&&z(ce)})}X(z=>se(wt,`]${z??""}`),[()=>(C(r()),b(()=>h(r())?",":""))]),A("click",q,function(...z){s()?.apply(this,z)}),A("click",S,f),A("keydown",S,o),T(p,S)};ae(k,p=>{r()&&p(x)})}T(e,_),Ct()}var oi=I('<div class="empty-state-container svelte-r539bm"><div class="empty-state-header svelte-r539bm" role="region" aria-label="Drop zone for first panel"><div class="empty-state-text svelte-r539bm">Drag an agent here to view its transcript</div></div></div>'),li=I('<span class="agent-badge svelte-r539bm" role="button" tabindex="0" draggable="true"> <button class="remove-btn svelte-r539bm">×</button></span>'),fi=I('<div role="region" aria-label="Drop zone to insert panel"></div> <div role="region" aria-label="Panel header drop zone"><div class="agent-badges svelte-r539bm"></div></div>',1),ui=I('<div class="system-prompt-box svelte-r539bm"><div class="system-prompt-content svelte-r539bm"> </div></div>'),ci=I('<div class="system-prompt-box svelte-r539bm"><div class="system-prompt-agent-name svelte-r539bm"> </div> <div class="system-prompt-content svelte-r539bm"> </div></div>'),di=I('<div role="region" aria-label="Drop zone to insert panel"></div> <div class="system-prompts-cell svelte-r539bm" role="region" aria-label="Panel drop zone"><!></div>',1),vi=I('<div class="empty-state svelte-r539bm">No messages to display</div>'),_i=I('<span class="agent-prefix svelte-r539bm"> </span>'),hi=I('<span class="tool-icon svelte-r539bm" role="button" tabindex="0" title="Click to view tool usage details">○</span>'),pi=I('<div class="tool-group svelte-r539bm"><!> <!></div>'),gi=I('<div role="region" aria-label="Panel drop zone"></div>'),mi=I('<div role="region" aria-label="Drop zone to insert panel"></div> <!>',1),bi=I('<div><!> <div role="region" aria-label="Drop zone to insert panel"></div></div>'),yi=I('<div class="messages-scroll-container svelte-r539bm"><div class="panel-headers svelte-r539bm"><!> <div role="region" aria-label="Drop zone to insert panel"></div></div> <div class="system-prompts-row svelte-r539bm"><!> <div role="region" aria-label="Drop zone to insert panel"></div></div> <div class="messages-grid svelte-r539bm"><!></div></div>'),wi=I('<div class="panels-container svelte-r539bm"><!></div> <!>',1);function Ei(e,t){Mt(t,!1);const n=()=>fn(En,"$allMessages",a),r=()=>fn(qt,"$panels",a),s=()=>fn(St,"$agents",a),[a,l]=or(),f=H(),o=H();let u=1,c=H(null),h=H(null),v=H(null);function d(m){M(v,m)}function E(){M(v,null)}function w(m){const g={id:u++,agentIds:[m]};qt.update(y=>[...y,g])}function _(m,g){const y={id:u++,agentIds:[m]};qt.update(P=>{const L=[...P];return L.splice(g,0,y),L})}function k(m,g){qt.update(y=>y.map(P=>P.id===m&&!P.agentIds.includes(g)?{...P,agentIds:[...P.agentIds,g]}:P))}function x(m,g){qt.update(y=>y.map(L=>L.id===m?{...L,agentIds:L.agentIds.filter(V=>V!==g)}:L).filter(L=>L.agentIds.length>0))}function p(m,g,y){y.stopPropagation(),y.dataTransfer.effectAllowed="move",y.dataTransfer.setData("application/json",JSON.stringify({agentId:g,fromPanel:m}))}function S(m,g,y){y.dataTransfer.dropEffect==="none"&&x(m,g)}function Y(m,g){g.preventDefault(),g.stopPropagation(),M(h,null);const y=JSON.parse(g.dataTransfer.getData("application/json"));y.agentId&&(y.fromPanel!==void 0&&y.fromPanel!==m&&x(y.fromPanel,y.agentId),k(m,y.agentId))}function N(m,g){g.preventDefault(),g.stopPropagation(),M(h,m)}function q(m){m.preventDefault(),m.stopPropagation(),M(h,null)}function B(m,g){g.preventDefault(),g.stopPropagation(),M(c,null);const y=JSON.parse(g.dataTransfer.getData("application/json"));y.agentId&&(y.fromPanel!==void 0&&x(y.fromPanel,y.agentId),_(y.agentId,m))}function U(m){m.preventDefault();const g=JSON.parse(m.dataTransfer.getData("application/json"));g.agentId&&(g.fromPanel!==void 0&&x(g.fromPanel,g.agentId),w(g.agentId))}function ie(m,g){g.preventDefault(),g.stopPropagation(),M(c,m)}function J(m){m.preventDefault(),M(c,null)}function ue(m,g){return g.agentIds.includes(m.agent)}function He(m,g){const y=new Map;for(const P of g){const L=m.filter(Ee=>ue(Ee,P)),V=La(L);y.set(P.id,new Set(V.map(Ee=>Ee.id)))}return y}function ft(m,g,y){const P=[],L=new Map,V=new Map,Ee=new Set;for(const F of m){if(Ee.has(F.id))continue;let Te=!1;for(const ze of y)if(g.get(ze.id)?.has(F.id)){Te=!0;break}if(!Te)continue;let te;if(F.substance)L.has(F.substance)?(te=L.get(F.substance),P[te].messages.push(F)):V.has(F.substance)?(te=V.get(F.substance),P[te].messages.push(F),L.set(F.substance,te)):(te=P.length,L.set(F.substance,te),P.push({substance:F.substance,messages:[F]}));else{if(F.role==="assistant_tool_use"&&P.length>0){const ze=P[P.length-1],Ze=ze.messages[ze.messages.length-1];Ze.role==="assistant_tool_use"&&Ze.agent===F.agent?(te=P.length-1,P[te].messages.push(F)):(te=P.length,P.push({substance:null,messages:[F]}))}else te=P.length,P.push({substance:null,messages:[F]});V.set(F.id,te)}Ee.add(F.id)}return P}function wt(m){const g=[];let y=0;for(;y<m.length;){const P=m[y];if(P.role==="assistant_tool_use"){const L=[P];let V=y+1;for(;V<m.length&&m[V].role==="assistant_tool_use"&&m[V].agent===P.agent;)L.push(m[V]),V++;g.push({type:"tool_group",agent:P.agent,messages:L}),y=V}else g.push({type:"message",message:P}),y++}return g}le(()=>(n(),r()),()=>{M(f,He(n(),r()))}),le(()=>(n(),i(f),r()),()=>{M(o,ft(n(),i(f),r()))}),pn(),nn();var ut=wi(),Nt=ne(ut),$=D(Nt);{var ce=m=>{var g=oi(),y=D(g);A("dragover",y,P=>P.preventDefault()),A("drop",y,U),T(m,g)},z=m=>{var g=yi(),y=D(g),P=D(y);_e(P,3,r,G=>G.id,(G,Z,qe)=>{var Qe=fi(),de=ne(Qe);let Et;var Re=O(de,2);let ct;var $t=D(Re);_e($t,5,()=>(i(Z),b(()=>i(Z).agentIds)),ye=>ye,(ye,K)=>{const Pe=fe(()=>(s(),i(K),b(()=>s()[i(K)])));var re=Ae(),Ve=ne(re);{var Ke=he=>{const pe=fe(()=>(i(K),C(i(Pe)),b(()=>i(K)+"_"+i(Pe).name)));var Ne=li(),dt=D(Ne),ke=O(dt);X((oe,et)=>{dn(Ne,`background-color: ${oe??""}; border-color: ${et??""};`),se(dt,`${C(i(Pe)),b(()=>i(Pe).name)??""} `)},[()=>(C(Hn),C(i(pe)),b(()=>Hn(i(pe)))),()=>(C(Vn),C(i(pe)),b(()=>Vn(i(pe))))]),A("click",ke,()=>x(i(Z).id,i(K))),A("dragstart",Ne,oe=>p(i(Z).id,i(K),oe)),A("dragend",Ne,oe=>S(i(Z).id,i(K),oe)),T(he,Ne)};ae(Ve,he=>{i(Pe)&&he(Ke)})}T(ye,re)}),X(()=>{Et=xe(de,1,"divider-drop-zone svelte-r539bm",null,Et,{hovered:i(c)===`divider-${i(qe)}`}),ct=xe(Re,1,"panel-header svelte-r539bm",null,ct,{hovered:i(h)===i(Z).id})}),A("dragover",de,ye=>ie(`divider-${i(qe)}`,ye)),A("dragleave",de,J),A("drop",de,ye=>B(i(qe),ye)),A("dragover",Re,ye=>N(i(Z).id,ye)),A("dragleave",Re,q),A("drop",Re,ye=>Y(i(Z).id,ye)),T(G,Qe)});var L=O(P,2);let V;var Ee=O(y,2),F=D(Ee);_e(F,3,r,G=>G.id,(G,Z,qe)=>{var Qe=di(),de=ne(Qe);let Et;var Re=O(de,2),ct=D(Re);{var $t=K=>{const Pe=fe(()=>(i(Z),b(()=>i(Z).agentIds[0]))),re=fe(()=>(s(),C(i(Pe)),b(()=>s()[i(Pe)])));var Ve=Ae(),Ke=ne(Ve);{var he=pe=>{var Ne=Ae(),dt=ne(Ne);_e(dt,1,()=>(C(i(re)),b(()=>i(re).systemPrompts)),on,(ke,oe)=>{var et=ui(),vt=D(et),rn=D(vt);X(()=>se(rn,i(oe))),T(ke,et)}),T(pe,Ne)};ae(Ke,pe=>{C(i(re)),b(()=>i(re)&&i(re).systemPrompts&&i(re).systemPrompts.length>0)&&pe(he)})}T(K,Ve)},ye=K=>{var Pe=Ae(),re=ne(Pe);_e(re,1,()=>(i(Z),b(()=>i(Z).agentIds)),Ve=>Ve,(Ve,Ke)=>{const he=fe(()=>(s(),i(Ke),b(()=>s()[i(Ke)])));var pe=Ae(),Ne=ne(pe);{var dt=ke=>{var oe=Ae(),et=ne(oe);_e(et,1,()=>(C(i(he)),b(()=>i(he).systemPrompts)),on,(vt,rn)=>{var tt=ci(),sn=D(tt),De=D(sn),ve=O(sn,2),gn=D(ve);X(()=>{se(De,(C(i(he)),b(()=>i(he).name))),se(gn,i(rn))}),T(vt,tt)}),T(ke,oe)};ae(Ne,ke=>{C(i(he)),b(()=>i(he)&&i(he).systemPrompts&&i(he).systemPrompts.length>0)&&ke(dt)})}T(Ve,pe)}),T(K,Pe)};ae(ct,K=>{i(Z),b(()=>i(Z).agentIds.length===1)?K($t):K(ye,!1)})}X(()=>Et=xe(de,1,"divider-drop-zone svelte-r539bm",null,Et,{hovered:i(c)===`divider-${i(qe)}`})),A("dragover",de,K=>ie(`divider-${i(qe)}`,K)),A("dragleave",de,J),A("drop",de,K=>B(i(qe),K)),A("dragover",Re,K=>N(i(Z).id,K)),A("dragleave",Re,q),A("drop",Re,K=>Y(i(Z).id,K)),T(G,Qe)});var Te=O(F,2);let te;var ze=O(Ee,2),Ze=D(ze);{var Ot=G=>{var Z=vi();T(G,Z)},In=G=>{var Z=Ae(),qe=ne(Z);_e(qe,3,()=>i(o),(Qe,de)=>Qe.substance||`row-${de}`,(Qe,de,Et)=>{const Re=fe(()=>(i(de),b(()=>i(de).messages.every(re=>re.role==="assistant_tool_use"))));var ct=bi();let $t;var ye=D(ct);_e(ye,3,r,re=>re.id,(re,Ve,Ke)=>{var he=mi(),pe=ne(he);let Ne;var dt=O(pe,2);_e(dt,1,()=>[i(Ve)],ke=>ke.id,(ke,oe)=>{const et=fe(()=>(i(de),i(f),i(oe),b(()=>i(de).messages.filter(De=>i(f).get(i(oe).id)?.has(De.id))))),vt=fe(()=>(C(i(et)),b(()=>wt(i(et))))),rn=fe(()=>(C(i(vt)),b(()=>i(vt).length>0&&i(vt).every(De=>De.type==="tool_group"))));var tt=gi();let sn;_e(tt,7,()=>i(vt),(De,ve)=>De.type==="tool_group"?`tool-group-${i(oe).id}-${i(Et)}-${ve}`:De.message.id,(De,ve)=>{var gn=Ae(),ls=ne(gn);{var fs=Rt=>{var mn=pi(),bn=D(mn);{var cs=kt=>{const Lt=fe(()=>(s(),i(ve),b(()=>s()[i(ve).agent]?.name))),Ft=fe(()=>(i(ve),C(i(Lt)),b(()=>i(ve).agent+"_"+i(Lt)))),Nn=fe(()=>(C(Dn),C(i(Ft)),b(()=>Dn(i(Ft)))));var On=_i(),vs=D(On);X(()=>{dn(On,`color: ${i(Nn)??""};`),se(vs,`[${i(Lt)??""}]:`)}),T(kt,On)};ae(bn,kt=>{i(oe),b(()=>i(oe).agentIds.length>1)&&kt(cs)})}var ds=O(bn,2);_e(ds,1,()=>(i(ve),b(()=>i(ve).messages)),kt=>kt.id,(kt,Lt)=>{var Ft=hi();A("click",Ft,()=>d(i(Lt))),A("keydown",Ft,Nn=>Nn.key==="Enter"&&d(i(Lt))),T(kt,Ft)}),T(Rt,mn)},us=Rt=>{{let mn=fe(()=>(s(),i(ve),b(()=>s()[i(ve).message.agent]?.name))),bn=fe(()=>(i(oe),b(()=>i(oe).agentIds.length>1)));Ga(Rt,{get message(){return i(ve),b(()=>i(ve).message)},get agentName(){return i(mn)},get agentId(){return i(ve),b(()=>i(ve).message.agent)},get showPrefix(){return i(bn)}})}};ae(ls,Rt=>{i(ve),b(()=>i(ve).type==="tool_group")?Rt(fs):Rt(us,!1)})}T(De,gn)}),X(()=>sn=xe(tt,1,"message-cell svelte-r539bm",null,sn,{"tool-message-cell":i(rn)})),A("dragover",tt,De=>N(i(oe).id,De)),A("dragleave",tt,q),A("drop",tt,De=>Y(i(oe).id,De)),T(ke,tt)}),X(()=>Ne=xe(pe,1,"divider-drop-zone svelte-r539bm",null,Ne,{hovered:i(c)===`divider-${i(Ke)}`})),A("dragover",pe,ke=>ie(`divider-${i(Ke)}`,ke)),A("dragleave",pe,J),A("drop",pe,ke=>B(i(Ke),ke)),T(re,he)});var K=O(ye,2);let Pe;X(()=>{$t=xe(ct,1,"message-row svelte-r539bm",null,$t,{"tool-row":i(Re)}),Pe=xe(K,1,"divider-drop-zone svelte-r539bm",null,Pe,{hovered:i(c)===`divider-${r().length}`})}),A("dragover",K,re=>ie(`divider-${r().length}`,re)),A("dragleave",K,J),A("drop",K,re=>B(r().length,re)),T(Qe,ct)}),T(G,Z)};ae(Ze,G=>{i(o),b(()=>i(o).length===0)?G(Ot):G(In,!1)})}X(()=>{V=xe(L,1,"divider-drop-zone svelte-r539bm",null,V,{hovered:i(c)===`divider-${r().length}`}),te=xe(Te,1,"divider-drop-zone svelte-r539bm",null,te,{hovered:i(c)===`divider-${r().length}`})}),A("dragover",L,G=>ie(`divider-${r().length}`,G)),A("dragleave",L,J),A("drop",L,G=>B(r().length,G)),A("dragover",Te,G=>ie(`divider-${r().length}`,G)),A("dragleave",Te,J),A("drop",Te,G=>B(r().length,G)),T(m,g)};ae($,m=>{r(),b(()=>r().length===0)?m(ce):m(z,!1)})}var W=O(Nt,2);ii(W,{get toolUseMessage(){return i(v)},onClose:E}),T(e,ut),Ct(),l()}var ki=I('<div role="region" aria-label="File drop zone"><div class="drop-zone-content svelte-1n46o8q"><h1 class="svelte-1n46o8q">Multi-Agent Event Log Viewer</h1> <p class="svelte-1n46o8q">Connecting to live session...</p> <p style="font-size: 0.9rem; color: #888; margin-top: 1rem;" class="svelte-1n46o8q">Or drag and drop a .jsonl log file here to view it</p> <p style="font-size: 0.8rem; color: #aaa; margin-top: 0.5rem;" class="svelte-1n46o8q">(You can also use ?log=/path/to/file.jsonl)</p></div></div>'),xi=I('<div class="viewer svelte-1n46o8q"><div class="hierarchy-section svelte-1n46o8q"><!></div> <div class="panels-section svelte-1n46o8q"><!></div></div>'),Si=I('<main class="svelte-1n46o8q"><!></main>');function Ti(e,t){Mt(t,!1);let n=H(!1),r=H(!1),s=!1;const a={agents:{},messages:[],hooksByParent:new Map,toolResults:new Map};function l(w){os(w,a),St.set({...a.agents}),En.set([...a.messages])}function f(){const w=new EventSource("/events");return w.onmessage=_=>{const k=JSON.parse(_.data);l(k),i(r)||(M(r,!0),s=!0)},w.onerror=_=>{console.error("SSE connection error:",_)},w}Na(async()=>{const _=new URLSearchParams(window.location.search).get("log");if(_){try{const x=await fetch(_);if(!x.ok)throw new Error(`Failed to fetch log file: ${x.status} ${x.statusText}`);const p=await x.text(),{agents:S,messages:Y}=yr(p);St.set(S),En.set(Y),M(r,!0),s=!1;const N=_.split("/").pop();document.title=N||"Log Viewer"}catch(x){console.error("Failed to load log file from URL:",x),alert(`Failed to load log file: ${x.message}`)}return}try{const p=await(await fetch("/session-info")).json();p.filename&&(document.title=p.filename)}catch(x){console.error("Failed to fetch session info:",x)}const k=f();return()=>{k.close()}});function o(w){w.preventDefault(),M(n,!0)}function u(w){w.preventDefault(),M(n,!1)}async function c(w){w.preventDefault(),M(n,!1);const _=w.dataTransfer.files;if(_.length===0)return;const k=_[0];if(!k.name.endsWith(".jsonl")){alert("Please drop a .jsonl file");return}const x=await k.text(),{agents:p,messages:S}=yr(x);St.set(p),En.set(S),M(r,!0),s=!1}nn();var h=Si(),v=D(h);{var d=w=>{var _=ki();let k;X(()=>k=xe(_,1,"drop-zone svelte-1n46o8q",null,k,{"drag-over":i(n)})),A("dragover",_,o),A("dragleave",_,u),A("drop",_,c),T(w,_)},E=w=>{var _=xi(),k=D(_),x=D(k);Va(x,{});var p=O(k,2),S=D(p);Ei(S,{}),T(w,_)};ae(v,w=>{i(r)?w(E,!1):w(d)})}T(e,h),Ct()}ma(Ti,{target:document.getElementById("app")});</script>
    <style rel="stylesheet" crossorigin>*{box-sizing:border-box}body{margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;font-size:14px;line-height:1.6}#app{width:100%;height:100vh}.agent-node.svelte-1ulaew4{user-select:none}.agent-node.inline.svelte-1ulaew4{display:inline-flex;align-items:center}.agent-item.svelte-1ulaew4{display:flex;align-items:center;padding:.15rem 0;gap:.5rem}.agent-node.svelte-1ulaew4:not(.inline) .agent-node:not(.inline){margin-top:-.2rem}.toggle.svelte-1ulaew4{cursor:pointer;width:20px;display:inline-block;text-align:center;font-size:.8rem;user-select:none}.toggle-spacer.svelte-1ulaew4{width:20px;display:inline-block}.separator.svelte-1ulaew4{color:#999;font-size:.9rem;margin:0 .3rem}.agent-badge.svelte-1ulaew4{display:inline-flex;align-items:center;padding:.1rem .75rem;border-radius:12px;font-size:.9rem;font-weight:500;cursor:move;border:1px solid;transition:transform .2s}.agent-badge.svelte-1ulaew4:hover{transform:translateY(-1px)}.hook-indicator.svelte-1ulaew4{margin-left:.4rem;font-size:.75rem;font-weight:600;color:#666;opacity:.8;cursor:move;user-select:none}.hierarchy.svelte-5r6xef{font-family:monospace}.empty.svelte-5r6xef{color:#999;font-style:italic}.message.svelte-kszgzy{margin-bottom:.5rem;word-wrap:break-word}.message.user.svelte-kszgzy{background:#f0f0f0;padding:.75rem 1rem;border-radius:8px;max-width:90%;margin-left:auto;margin-right:0}.message.assistant.svelte-kszgzy{width:100%}.message-content.svelte-kszgzy{white-space:pre-wrap;line-height:1.5}.agent-prefix.svelte-kszgzy{font-weight:700;margin-right:.5rem}.system-rejection-content.svelte-kszgzy{font-family:Courier New,Courier,monospace}.strikethrough.svelte-kszgzy{text-decoration:line-through;opacity:.6}.modal-backdrop.svelte-g00oa{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;padding:2rem}.modal-content.svelte-g00oa{background:#fff;border-radius:8px;max-width:900px;width:100%;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 4px 20px #0000004d}.modal-header.svelte-g00oa{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #ddd}.modal-header.svelte-g00oa h2:where(.svelte-g00oa){margin:0;font-size:1.5rem}.close-btn.svelte-g00oa{background:none;border:none;font-size:2rem;cursor:pointer;color:#666;line-height:1;padding:0;width:2rem;height:2rem}.close-btn.svelte-g00oa:hover{color:#d32f2f}.modal-body.svelte-g00oa{overflow-y:auto;padding:1.5rem}.message-fields.svelte-g00oa{margin-bottom:1rem}.fields-display.svelte-g00oa{font-family:Courier New,Courier,monospace;font-size:.9rem;margin:0;margin-bottom:1rem}.field-line.svelte-g00oa{line-height:1.5}.field-name.svelte-g00oa{font-weight:700}.inline-tool-button.svelte-g00oa{background:transparent;color:#333;border:1px solid #999;padding:0 3px;border-radius:2px;cursor:pointer;font-family:Courier New,Courier,monospace;font-size:.9rem;font-weight:400;transition:all .15s;display:inline;margin:0;vertical-align:baseline}.inline-tool-button.svelte-g00oa:hover{background:#e8e8e8;border-color:#666}.inline-tool-button.selected.svelte-g00oa{background:#007bff;color:#fff;border-color:#0056b3}.divider.svelte-g00oa{border:none;border-top:1px solid #ccc;margin:1rem 0}.tool-call-details.svelte-g00oa,.tool-result-details.svelte-g00oa{margin:1rem 0}.details-display.svelte-g00oa{font-family:Courier New,Courier,monospace;font-size:.9rem;margin:0}.detail-line.svelte-g00oa{line-height:1.5;white-space:pre-wrap}.panels-container.svelte-r539bm,.empty-state-container.svelte-r539bm{display:flex;flex-direction:column;height:100%}.empty-state-header.svelte-r539bm{position:sticky;top:0;z-index:10;display:flex;align-items:center;justify-content:center;padding:.75rem;border-bottom:2px solid #ddd;background:#f9f9f9;min-height:3rem}.empty-state-text.svelte-r539bm{color:#999;font-style:italic;font-size:1rem}.messages-scroll-container.svelte-r539bm{flex:1;overflow-y:auto;overflow-x:auto}.panel-headers.svelte-r539bm{position:sticky;top:0;z-index:10;display:flex;border-bottom:2px solid #ddd;background:#f9f9f9}.divider-drop-zone.svelte-r539bm{min-width:2em;width:2em;background:transparent;position:relative;transition:background .2s;cursor:pointer}.divider-drop-zone.svelte-r539bm:before{content:"";position:absolute;left:50%;top:0;bottom:0;width:1px;background:#333;transform:translate(-50%)}.divider-drop-zone.hovered.svelte-r539bm{background:#add8e680}.panel-header.svelte-r539bm{flex:1;min-width:400px;padding:.75rem;transition:background .2s}.panel-header.hovered.svelte-r539bm{background:#add8e680}.agent-badges.svelte-r539bm{display:flex;gap:.5rem;flex-wrap:wrap}.agent-badge.svelte-r539bm{display:inline-flex;align-items:center;gap:.5rem;padding:.1rem .75rem;border-radius:12px;font-size:.9rem;font-weight:500;border:1px solid;cursor:move;user-select:none}.remove-btn.svelte-r539bm{background:none;border:none;cursor:pointer;font-size:1.2rem;line-height:1;padding:0;color:#666}.remove-btn.svelte-r539bm:hover{color:#d32f2f}.messages-grid.svelte-r539bm{min-width:fit-content}.message-row.svelte-r539bm{display:flex;min-height:40px}.tool-row.svelte-r539bm{min-height:auto}.message-cell.svelte-r539bm{flex:1;min-width:400px;padding:.5rem 1rem}.tool-message-cell.svelte-r539bm{padding:0 1rem}.tool-group.svelte-r539bm{display:flex;align-items:center;gap:.25rem}.tool-icon.svelte-r539bm{font-size:.6rem;padding:0;cursor:pointer;user-select:none;transition:transform .1s}.tool-icon.svelte-r539bm:hover{transform:scale(1.2)}.tool-icon.svelte-r539bm:active{transform:scale(1)}.agent-prefix.svelte-r539bm{font-weight:700;margin-right:.5rem}.empty-state.svelte-r539bm{padding:2rem;text-align:center;color:#999;font-style:italic}.system-prompts-row.svelte-r539bm{display:flex;min-height:fit-content}.system-prompts-cell.svelte-r539bm{flex:1;min-width:400px;padding:.5rem 1rem}.system-prompt-box.svelte-r539bm{border:2pt dashed #000;padding:.75rem;margin-bottom:.5rem;background:#fff}.system-prompt-agent-name.svelte-r539bm{font-weight:700;margin-bottom:.5rem;color:#333}.system-prompt-content.svelte-r539bm{white-space:pre-wrap;font-family:monospace,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:.8rem;line-height:1.5;color:#333}main.svelte-1n46o8q{width:100%;height:100vh;margin:0;padding:0}.drop-zone.svelte-1n46o8q{width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background:#f5f5f5;border:3px dashed #ccc;transition:all .3s}.drop-zone.drag-over.svelte-1n46o8q{background:#e8f4f8;border-color:#4a90e2}.drop-zone-content.svelte-1n46o8q{text-align:center}.drop-zone-content.svelte-1n46o8q h1:where(.svelte-1n46o8q){color:#333;margin-bottom:1rem}.drop-zone-content.svelte-1n46o8q p:where(.svelte-1n46o8q){color:#666;font-size:1.1rem}.viewer.svelte-1n46o8q{display:flex;flex-direction:column;height:100vh}.hierarchy-section.svelte-1n46o8q{border-bottom:2px solid #ddd;padding:.5rem 1rem;max-height:20vh;overflow-y:auto}.panels-section.svelte-1n46o8q{flex:1;overflow:hidden}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
