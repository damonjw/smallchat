<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Multi-Agent Event Log Viewer</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const Rn=!1;var br=Array.isArray,cs=Array.prototype.indexOf,Yn=Array.from,yr=Object.defineProperty,Vt=Object.getOwnPropertyDescriptor,ds=Object.getOwnPropertyDescriptors,vs=Object.prototype,_s=Array.prototype,wr=Object.getPrototypeOf,or=Object.isExtensible;const mt=()=>{};function hs(e){return e()}function xn(e){for(var t=0;t<e.length;t++)e[t]()}function Er(){var e,t,n=new Promise((r,s)=>{e=r,t=s});return{promise:n,resolve:e,reject:t}}const be=2,xr=4,An=8,ps=1<<24,ot=16,ft=32,Mt=64,Mn=128,Ve=512,ge=1024,$e=2048,Ze=4096,Re=8192,it=16384,Jn=32768,Yt=65536,fr=1<<17,Pr=1<<18,Zt=1<<19,Sr=1<<20,kt=32768,Ln=1<<21,Wn=1<<22,bt=1<<23,Kt=Symbol("$state"),gs=Symbol("legacy props"),qt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ms(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function bs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ys(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ws(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Es(e){throw new Error("https://svelte.dev/e/effect_orphan")}function xs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ps(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ss(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ts(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ks(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ds(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Tr=1,kr=2,Dr=4,As=8,Ms=16,$s=2,Cs=4,Os=8,Is=1,Ns=2,we=Symbol();function Rs(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ar(e){return e===this.v}function Mr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function $r(e){return!Mr(e,this.v)}let Qt=!1,Ls=!1;function Fs(){Qt=!0}let X=null;function Jt(e){X=e}function $t(e,t=!1,n){X={p:X,i:!1,c:null,e:null,s:e,x:null,l:Qt&&!t?{s:null,u:null,$:[]}:null}}function Ct(e){var t=X,n=t.e;if(n!==null){t.e=null;for(var r of n)Vr(r)}return t.i=!0,X=t.p,{}}function dn(){return!Qt||X!==null&&X.l===null}let Bt=[];function zs(){var e=Bt;Bt=[],xn(e)}function vn(e){if(Bt.length===0){var t=Bt;queueMicrotask(()=>{t===Bt&&zs()})}Bt.push(e)}function Cr(e){var t=R;if(t===null)return N.f|=bt,e;if((t.f&Jn)===0){if((t.f&Mn)===0)throw e;t.b.error(e)}else Wt(e,t)}function Wt(e,t){for(;t!==null;){if((t.f&Mn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const yn=new Set;let W=null,qe=null,Je=[],Gn=null,Fn=!1;class We{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#r=0;#n=0;#o=null;#a=[];#s=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){Je=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)this.#i(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#l(n.effects),this.#l(n.render_effects),this.#l(n.block_effects)):(W=null,ur(n.render_effects),ur(n.effects),this.#o?.resolve()),qe=null}#i(t,n){t.f^=ge;for(var r=t.first;r!==null;){var s=r.f,a=(s&(ft|Mt))!==0,i=a&&(s&ge)!==0,u=i||(s&Re)!==0||this.skipped_effects.has(r);if((r.f&Mn)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!u&&r.fn!==null){a?r.f^=ge:(s&xr)!==0?n.effects.push(r):en(r)&&((r.f&ot)!==0&&n.block_effects.push(r),Xt(r));var o=r.first;if(o!==null){r=o;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)f===n.effect&&(this.#l(n.effects),this.#l(n.render_effects),this.#l(n.block_effects),n=n.parent),r=f.next,f=f.parent}}#l(t){for(const n of t)((n.f&$e)!==0?this.#a:this.#s).push(n),this.#f(n.deps),me(n,ge)}#f(t){if(t!==null)for(const n of t)(n.f&be)===0||(n.f&kt)===0||(n.f^=kt,this.#f(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&bt)===0&&(this.current.set(t,t.v),qe?.set(t,t.v))}activate(){W=this,this.apply()}deactivate(){W===this&&(W=null,qe=null)}flush(){if(this.activate(),Je.length>0){if(js(),W!==null&&W!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#u(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#r===0&&this.#c()}#c(){if(yn.size>1){this.previous.clear();var t=qe,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of yn){if(a===this){n=!1;continue}const i=[];for(const[o,f]of this.current){if(a.current.has(o))if(n&&f!==a.current.get(o))a.current.set(o,f);else continue;i.push(o)}if(i.length===0)continue;const u=[...a.current.keys()].filter(o=>!this.current.has(o));if(u.length>0){var s=Je;Je=[];const o=new Set,f=new Map;for(const d of i)Or(d,u,o,f);if(Je.length>0){W=a,a.apply();for(const d of Je)a.#i(d,r);a.deactivate()}Je=s}}W=null,qe=t}this.committed=!0,yn.delete(this)}increment(t){this.#r+=1,t&&(this.#n+=1)}decrement(t){this.#r-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#a)me(t,$e),Dt(t);for(const t of this.#s)me(t,Ze),Dt(t);this.#a=[],this.#s=[],this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#o??=Er()).promise}static ensure(){if(W===null){const t=W=new We;yn.add(W),We.enqueue(()=>{W===t&&t.flush()})}return W}static enqueue(t){vn(t)}apply(){}}function js(){var e=wt;Fn=!0;var t=null;try{var n=0;for(Sn(!0);Je.length>0;){var r=We.ensure();if(n++>1e3){var s,a;qs()}r.process(Je),yt.clear()}}finally{Fn=!1,Sn(e),Gn=null}}function qs(){try{xs()}catch(e){Wt(e,Gn)}}let st=null;function ur(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(it|Re))===0&&en(r)&&(st=new Set,Xt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Jr(r):r.fn=null),st?.size>0)){yt.clear();for(const s of st){if((s.f&(it|Re))!==0)continue;const a=[s];let i=s.parent;for(;i!==null;)st.has(i)&&(st.delete(i),a.push(i)),i=i.parent;for(let u=a.length-1;u>=0;u--){const o=a[u];(o.f&(it|Re))===0&&Xt(o)}}st.clear()}}st=null}}function Or(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const s of e.reactions){const a=s.f;(a&be)!==0?Or(s,t,n,r):(a&(Wn|ot))!==0&&(a&$e)===0&&Ir(s,t,r)&&(me(s,$e),Dt(s))}}function Ir(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const s of e.deps){if(t.includes(s))return!0;if((s.f&be)!==0&&Ir(s,t,n))return n.set(s,!0),!0}return n.set(e,!1),!1}function Dt(e){for(var t=Gn=e;t.parent!==null;){t=t.parent;var n=t.f;if(Fn&&t===R&&(n&ot)!==0&&(n&Pr)===0)return;if((n&(Mt|ft))!==0){if((n&ge)===0)return;t.f^=ge}}Je.push(t)}function Bs(e){let t=0,n=At(0),r;return()=>{fn()&&(l(n),tr(()=>(t===0&&(r=m(()=>e(()=>ln(n)))),t+=1,()=>{vn(()=>{t-=1,t===0&&(r?.(),r=void 0,ln(n))})})))}}var Us=Yt|Zt|Mn;function Vs(e,t,n){new Ks(e,t,n)}class Ks{parent;#e=!1;#t;#r=null;#n;#o;#a;#s=null;#i=null;#l=null;#f=null;#u=null;#c=0;#d=0;#_=!1;#v=null;#b=Bs(()=>(this.#v=At(this.#c),()=>{this.#v=null}));constructor(t,n,r){this.#t=t,this.#n=n,this.#o=r,this.parent=R.b,this.#e=!!this.#n.pending,this.#a=nr(()=>{R.b=this;{var s=this.#g();try{this.#s=je(()=>r(s))}catch(a){this.error(a)}this.#d>0?this.#p():this.#e=!1}return()=>{this.#u?.remove()}},Us)}#y(){try{this.#s=je(()=>this.#o(this.#t))}catch(t){this.error(t)}this.#e=!1}#w(){const t=this.#n.pending;t&&(this.#i=je(()=>t(this.#t)),We.enqueue(()=>{var n=this.#g();this.#s=this.#h(()=>(We.ensure(),je(()=>this.#o(n)))),this.#d>0?this.#p():(Ht(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#g(){var t=this.#t;return this.#e&&(this.#u=Et(),this.#t.before(this.#u),t=this.#u),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#h(t){var n=R,r=N,s=X;Xe(this.#a),Ae(this.#a),Jt(this.#a.ctx);try{return t()}catch(a){return Cr(a),null}finally{Xe(n),Ae(r),Jt(s)}}#p(){const t=this.#n.pending;this.#s!==null&&(this.#f=document.createDocumentFragment(),this.#f.append(this.#u),Xr(this.#s,this.#f)),this.#i===null&&(this.#i=je(()=>t(this.#t)))}#m(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(t);return}this.#d+=t,this.#d===0&&(this.#e=!1,this.#i&&Ht(this.#i,()=>{this.#i=null}),this.#f&&(this.#t.before(this.#f),this.#f=null))}update_pending_count(t){this.#m(t),this.#c+=t,this.#v&&Gt(this.#v,this.#c)}get_effect_pending(){return this.#b(),l(this.#v)}error(t){var n=this.#n.onerror;let r=this.#n.failed;if(this.#_||!n&&!r)throw t;this.#s&&(Me(this.#s),this.#s=null),this.#i&&(Me(this.#i),this.#i=null),this.#l&&(Me(this.#l),this.#l=null);var s=!1,a=!1;const i=()=>{if(s){Rs();return}s=!0,a&&Ds(),We.ensure(),this.#c=0,this.#l!==null&&Ht(this.#l,()=>{this.#l=null}),this.#e=this.has_pending_snippet(),this.#s=this.#h(()=>(this.#_=!1,je(()=>this.#o(this.#t)))),this.#d>0?this.#p():this.#e=!1};var u=N;try{Ae(null),a=!0,n?.(t,i),a=!1}catch(o){Wt(o,this.#a&&this.#a.parent)}finally{Ae(u)}r&&vn(()=>{this.#l=this.#h(()=>{We.ensure(),this.#_=!0;try{return je(()=>{r(this.#t,()=>t,()=>i)})}catch(o){return Wt(o,this.#a.parent),null}finally{this.#_=!1}})})}}function an(e,t){return t}function Hs(e,t,n){for(var r=[],s=t.length,a=0;a<s;a++)rr(t[a].e,r,!0);Wr(r,()=>{var i=r.length===0&&n!==null;if(i){var u=n,o=u.parentNode;ta(o),o.append(u),e.items.clear(),Ue(e,t[0].prev,t[s-1].next)}for(var f=0;f<s;f++){var d=t[f];i||(e.items.delete(d.k),Ue(e,d.prev,d.next)),Me(d.e,!i)}e.first===t[0]&&(e.first=t[0].prev)})}function pe(e,t,n,r,s,a=null){var i=e,u=new Map,o=null,f=(t&Dr)!==0,d=(t&Tr)!==0,p=(t&kr)!==0;if(f){var v=e;i=v.appendChild(Et())}var _=null,x=oe(()=>{var A=n();return br(A)?A:A==null?[]:Yn(A)}),T,c=!0;function g(){Ys(w,T,i,t,r),_!==null&&(T.length===0?(_.fragment?(i.before(_.fragment),_.fragment=null):sr(_.effect),h.first=_.effect):Ht(_.effect,()=>{_=null}))}var h=nr(()=>{T=l(x);for(var A=T.length,z=new Set,Y=W,ie=null,U=Br(),ee=0;ee<A;ee+=1){var ve=T[ee],te=r(ve,ee),fe=c?null:u.get(te);fe?(d&&Gt(fe.v,ve),p?Gt(fe.i,ee):fe.i=ee,U&&Y.skipped_effects.delete(fe.e)):(fe=Js(c?i:null,ie,ve,te,ee,s,t,n),c&&(fe.o=!0,ie===null?o=fe:ie.next=fe,ie=fe),u.set(te,fe)),z.add(te)}if(A===0&&a&&!_)if(c)_={fragment:null,effect:je(()=>a(i))};else{var ct=document.createDocumentFragment(),j=Et();ct.append(j),_={fragment:ct,effect:je(()=>a(j))}}if(!c)if(U){for(const[Se,Le]of u)z.has(Se)||Y.skipped_effects.add(Le.e);Y.oncommit(g),Y.ondiscard(()=>{})}else g();l(x)}),w={effect:h,items:u,first:o};c=!1}function Ys(e,t,n,r,s){var a=(r&As)!==0,i=t.length,u=e.items,o=e.first,f,d=null,p,v=[],_=[],x,T,c,g;if(a)for(g=0;g<i;g+=1)x=t[g],T=s(x,g),c=u.get(T),c.o&&(c.a?.measure(),(p??=new Set).add(c));for(g=0;g<i;g+=1){if(x=t[g],T=s(x,g),c=u.get(T),e.first??=c,!c.o){c.o=!0;var h=d?d.next:o;Ue(e,d,c),Ue(e,c,h),Nn(c,h,n),d=c,v=[],_=[],o=d.next;continue}if((c.e.f&Re)!==0&&(sr(c.e),a&&(c.a?.unfix(),(p??=new Set).delete(c))),c!==o){if(f!==void 0&&f.has(c)){if(v.length<_.length){var w=_[0],A;d=w.prev;var z=v[0],Y=v[v.length-1];for(A=0;A<v.length;A+=1)Nn(v[A],w,n);for(A=0;A<_.length;A+=1)f.delete(_[A]);Ue(e,z.prev,Y.next),Ue(e,d,z),Ue(e,Y,w),o=w,d=Y,g-=1,v=[],_=[]}else f.delete(c),Nn(c,o,n),Ue(e,c.prev,c.next),Ue(e,c,d===null?e.first:d.next),Ue(e,d,c),d=c;continue}for(v=[],_=[];o!==null&&o.k!==T;)(o.e.f&Re)===0&&(f??=new Set).add(o),_.push(o),o=o.next;if(o===null)continue;c=o}v.push(c),d=c,o=c.next}let ie=u.size>i;if(o!==null||f!==void 0){for(var U=f===void 0?[]:Yn(f);o!==null;)(o.e.f&Re)===0&&U.push(o),o=o.next;var ee=U.length;if(ie=u.size-ee>i,ee>0){var ve=(r&Dr)!==0&&i===0?n:null;if(a){for(g=0;g<ee;g+=1)U[g].a?.measure();for(g=0;g<ee;g+=1)U[g].a?.fix()}Hs(e,U,ve)}}if(ie)for(const te of u.values())te.o||(Ue(e,d,te),d=te);e.effect.last=d&&d.e,a&&vn(()=>{if(p!==void 0)for(c of p)c.a?.apply()})}function Js(e,t,n,r,s,a,i,u){var o=(i&Tr)!==0,f=(i&Ms)===0,d=o?f?H(n,!1,!1):At(n):n,p=(i&kr)===0?s:At(s),v={i:p,v:d,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var _=document.createDocumentFragment();_.append(e=Et())}return v.e=je(()=>a(e,d,p,u)),t!==null&&(t.next=v),v}finally{}}function Nn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==null&&a!==r;){var i=_n(a);s.before(a),a=i}}function Ue(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function Ws(e,t,n,r){const s=dn()?Xn:oe;if(n.length===0&&e.length===0){r(t.map(s));return}var a=W,i=R,u=Gs();function o(){Promise.all(n.map(f=>Xs(f))).then(f=>{u();try{r([...t.map(s),...f])}catch(d){(i.f&it)===0&&Wt(d,i)}a?.deactivate(),Pn()}).catch(f=>{Wt(f,i)})}e.length>0?Promise.all(e).then(()=>{u();try{return o()}finally{a?.deactivate(),Pn()}}):o()}function Gs(){var e=R,t=N,n=X,r=W;return function(a=!0){Xe(e),Ae(t),Jt(n),a&&r?.activate()}}function Pn(){Xe(null),Ae(null),Jt(null)}function Xn(e){var t=be|$e,n=N!==null&&(N.f&be)!==0?N:null;return R!==null&&(R.f|=Zt),{ctx:X,deps:null,effects:null,equals:Ar,f:t,fn:e,reactions:null,rv:0,v:we,wv:0,parent:n??R,ac:null}}function Xs(e,t){let n=R;n===null&&bs();var r=n.b,s=void 0,a=At(we),i=!N,u=new Map;return aa(()=>{var o=Er();s=o.promise;try{Promise.resolve(e()).then(o.resolve,o.reject).then(()=>{f===W&&f.committed&&f.deactivate(),Pn()})}catch(v){o.reject(v),Pn()}var f=W;if(i){var d=!r.is_pending();r.update_pending_count(1),f.increment(d),u.get(f)?.reject(qt),u.delete(f),u.set(f,o)}const p=(v,_=void 0)=>{if(f.activate(),_)_!==qt&&(a.f|=bt,Gt(a,_));else{(a.f&bt)!==0&&(a.f^=bt),Gt(a,v);for(const[x,T]of u){if(u.delete(x),x===f)break;T.reject(qt)}}i&&(r.update_pending_count(-1),f.decrement(d))};o.promise.then(p,v=>p(null,v||"unknown"))}),er(()=>{for(const o of u.values())o.reject(qt)}),new Promise(o=>{function f(d){function p(){d===s?o(a):f(s)}d.then(p,p)}f(s)})}function oe(e){const t=Xn(e);return t.equals=$r,t}function Nr(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Me(t[n])}}function Zs(e){for(var t=e.parent;t!==null;){if((t.f&be)===0)return(t.f&it)===0?t:null;t=t.parent}return null}function Zn(e){var t,n=R;Xe(Zs(e));try{e.f&=~kt,Nr(e),t=ts(e)}finally{Xe(n)}return t}function Rr(e){var t=Zn(e);if(e.equals(t)||(W?.is_fork||(e.v=t),e.wv=Qr()),!Ot)if(qe!==null)(fn()||W?.is_fork)&&qe.set(e,t);else{var n=(e.f&Ve)===0?Ze:ge;me(e,n)}}let zn=new Set;const yt=new Map;let Lr=!1;function At(e,t){var n={f:0,v:e,reactions:null,equals:Ar,rv:0,wv:0};return n}function ht(e,t){const n=At(e);return la(n),n}function H(e,t=!1,n=!0){const r=At(e);return t||(r.equals=$r),Qt&&n&&X!==null&&X.l!==null&&(X.l.s??=[]).push(r),r}function M(e,t,n=!1){N!==null&&(!Ge||(N.f&fr)!==0)&&dn()&&(N.f&(be|ot|Wn|fr))!==0&&!lt?.includes(e)&&ks();let r=n?Ut(t):t;return Gt(e,r)}function Gt(e,t){if(!e.equals(t)){var n=e.v;Ot?yt.set(e,t):yt.set(e,n),e.v=t;var r=We.ensure();r.capture(e,n),(e.f&be)!==0&&((e.f&$e)!==0&&Zn(e),me(e,(e.f&Ve)!==0?ge:Ze)),e.wv=Qr(),Fr(e,$e),dn()&&R!==null&&(R.f&ge)!==0&&(R.f&(ft|Mt))===0&&(ze===null?oa([e]):ze.push(e)),!r.is_fork&&zn.size>0&&!Lr&&Qs()}return t}function Qs(){Lr=!1;var e=wt;Sn(!0);const t=Array.from(zn);try{for(const n of t)(n.f&ge)!==0&&me(n,Ze),en(n)&&Xt(n)}finally{Sn(e)}zn.clear()}function ln(e){M(e,e.v+1)}function Fr(e,t){var n=e.reactions;if(n!==null)for(var r=dn(),s=n.length,a=0;a<s;a++){var i=n[a],u=i.f;if(!(!r&&i===R)){var o=(u&$e)===0;if(o&&me(i,t),(u&be)!==0){var f=i;qe?.delete(f),(u&kt)===0&&(u&Ve&&(i.f|=kt),Fr(f,Ze))}else o&&((u&ot)!==0&&st!==null&&st.add(i),Dt(i))}}}function Ut(e){if(typeof e!="object"||e===null||Kt in e)return e;const t=wr(e);if(t!==vs&&t!==_s)return e;var n=new Map,r=br(e),s=ht(0),a=Tt,i=u=>{if(Tt===a)return u();var o=N,f=Tt;Ae(null),dr(a);var d=u();return Ae(o),dr(f),d};return r&&n.set("length",ht(e.length)),new Proxy(e,{defineProperty(u,o,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Ss();var d=n.get(o);return d===void 0?d=i(()=>{var p=ht(f.value);return n.set(o,p),p}):M(d,f.value,!0),!0},deleteProperty(u,o){var f=n.get(o);if(f===void 0){if(o in u){const d=i(()=>ht(we));n.set(o,d),ln(s)}}else M(f,we),ln(s);return!0},get(u,o,f){if(o===Kt)return e;var d=n.get(o),p=o in u;if(d===void 0&&(!p||Vt(u,o)?.writable)&&(d=i(()=>{var _=Ut(p?u[o]:we),x=ht(_);return x}),n.set(o,d)),d!==void 0){var v=l(d);return v===we?void 0:v}return Reflect.get(u,o,f)},getOwnPropertyDescriptor(u,o){var f=Reflect.getOwnPropertyDescriptor(u,o);if(f&&"value"in f){var d=n.get(o);d&&(f.value=l(d))}else if(f===void 0){var p=n.get(o),v=p?.v;if(p!==void 0&&v!==we)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return f},has(u,o){if(o===Kt)return!0;var f=n.get(o),d=f!==void 0&&f.v!==we||Reflect.has(u,o);if(f!==void 0||R!==null&&(!d||Vt(u,o)?.writable)){f===void 0&&(f=i(()=>{var v=d?Ut(u[o]):we,_=ht(v);return _}),n.set(o,f));var p=l(f);if(p===we)return!1}return d},set(u,o,f,d){var p=n.get(o),v=o in u;if(r&&o==="length")for(var _=f;_<p.v;_+=1){var x=n.get(_+"");x!==void 0?M(x,we):_ in u&&(x=i(()=>ht(we)),n.set(_+"",x))}if(p===void 0)(!v||Vt(u,o)?.writable)&&(p=i(()=>ht(void 0)),M(p,Ut(f)),n.set(o,p));else{v=p.v!==we;var T=i(()=>Ut(f));M(p,T)}var c=Reflect.getOwnPropertyDescriptor(u,o);if(c?.set&&c.set.call(d,f),!v){if(r&&typeof o=="string"){var g=n.get("length"),h=Number(o);Number.isInteger(h)&&h>=g.v&&M(g,h+1)}ln(s)}return!0},ownKeys(u){l(s);var o=Reflect.ownKeys(u).filter(p=>{var v=n.get(p);return v===void 0||v.v!==we});for(var[f,d]of n)d.v!==we&&!(f in u)&&o.push(f);return o},setPrototypeOf(){Ts()}})}var jn,zr,jr,qr;function ea(){if(jn===void 0){jn=window,zr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;jr=Vt(t,"firstChild").get,qr=Vt(t,"nextSibling").get,or(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),or(n)&&(n.__t=void 0)}}function Et(e=""){return document.createTextNode(e)}function pt(e){return jr.call(e)}function _n(e){return qr.call(e)}function S(e,t){return pt(e)}function Q(e,t=!1){{var n=pt(e);return n instanceof Comment&&n.data===""?_n(n):n}}function O(e,t=1,n=!1){let r=e;for(;t--;)r=_n(r);return r}function ta(e){e.textContent=""}function Br(){return!1}function Qn(e){var t=N,n=R;Ae(null),Xe(null);try{return e()}finally{Ae(t),Xe(n)}}function Ur(e){R===null&&(N===null&&Es(),ws()),Ot&&ys()}function na(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ut(e,t,n){var r=R;r!==null&&(r.f&Re)!==0&&(e|=Re);var s={ctx:X,deps:null,nodes_start:null,nodes_end:null,f:e|$e|Ve,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Xt(s),s.f|=Jn}catch(u){throw Me(s),u}else t!==null&&Dt(s);var a=s;if(n&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&Zt)===0&&(a=a.first,(e&ot)!==0&&(e&Yt)!==0&&a!==null&&(a.f|=Yt)),a!==null&&(a.parent=r,r!==null&&na(a,r),N!==null&&(N.f&be)!==0&&(e&Mt)===0)){var i=N;(i.effects??=[]).push(a)}return s}function fn(){return N!==null&&!Ge}function er(e){const t=ut(An,null,!1);return me(t,ge),t.teardown=e,t}function qn(e){Ur();var t=R.f,n=!N&&(t&ft)!==0&&(t&Jn)===0;if(n){var r=X;(r.e??=[]).push(e)}else return Vr(e)}function Vr(e){return ut(xr|Sr,e,!1)}function ra(e){return Ur(),ut(An|Sr,e,!0)}function sa(e){We.ensure();const t=ut(Mt|Zt,e,!0);return(n={})=>new Promise(r=>{n.outro?Ht(t,()=>{Me(t),r(void 0)}):(Me(t),r(void 0))})}function Ee(e,t){var n=X,r={effect:null,ran:!1,deps:e};n.l.$.push(r),r.effect=tr(()=>{e(),!r.ran&&(r.ran=!0,m(t))})}function hn(){var e=X;tr(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&ge)!==0&&me(n,Ze),en(n)&&Xt(n),t.ran=!1}})}function aa(e){return ut(Wn|Zt,e,!0)}function tr(e,t=0){return ut(An|t,e,!0)}function G(e,t=[],n=[],r=[]){Ws(r,t,n,s=>{ut(An,()=>e(...s.map(l)),!0)})}function nr(e,t=0){var n=ut(ot|t,e,!0);return n}function je(e){return ut(ft|Zt,e,!0)}function Kr(e){var t=e.teardown;if(t!==null){const n=Ot,r=N;cr(!0),Ae(null);try{t.call(null)}finally{cr(n),Ae(r)}}}function Hr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const s=n.ac;s!==null&&Qn(()=>{s.abort(qt)});var r=n.next;(n.f&Mt)!==0?n.parent=null:Me(n,t),n=r}}function ia(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ft)===0&&Me(t),t=n}}function Me(e,t=!0){var n=!1;(t||(e.f&Pr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Yr(e.nodes_start,e.nodes_end),n=!0),Hr(e,t&&!n),Tn(e,0),me(e,it);var r=e.transitions;if(r!==null)for(const a of r)a.stop();Kr(e);var s=e.parent;s!==null&&s.first!==null&&Jr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Yr(e,t){for(;e!==null;){var n=e===t?null:_n(e);e.remove(),e=n}}function Jr(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ht(e,t,n=!0){var r=[];rr(e,r,!0),Wr(r,()=>{n&&Me(e),t&&t()})}function Wr(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function rr(e,t,n){if((e.f&Re)===0){if(e.f^=Re,e.transitions!==null)for(const i of e.transitions)(i.is_global||n)&&t.push(i);for(var r=e.first;r!==null;){var s=r.next,a=(r.f&Yt)!==0||(r.f&ft)!==0&&(e.f&ot)!==0;rr(r,t,a?n:!1),r=s}}}function sr(e){Gr(e,!0)}function Gr(e,t){if((e.f&Re)!==0){e.f^=Re,(e.f&ge)===0&&(me(e,$e),Dt(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Yt)!==0||(n.f&ft)!==0;Gr(n,s?t:!1),n=r}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}function Xr(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var s=n===r?null:_n(n);t.append(n),n=s}}let wt=!1;function Sn(e){wt=e}let Ot=!1;function cr(e){Ot=e}let N=null,Ge=!1;function Ae(e){N=e}let R=null;function Xe(e){R=e}let lt=null;function la(e){N!==null&&(lt===null?lt=[e]:lt.push(e))}let Pe=null,Oe=0,ze=null;function oa(e){ze=e}let Zr=1,un=0,Tt=un;function dr(e){Tt=e}function Qr(){return++Zr}function en(e){var t=e.f;if((t&$e)!==0)return!0;if(t&be&&(e.f&=~kt),(t&Ze)!==0){var n=e.deps;if(n!==null)for(var r=n.length,s=0;s<r;s++){var a=n[s];if(en(a)&&Rr(a),a.wv>e.wv)return!0}(t&Ve)!==0&&qe===null&&me(e,ge)}return!1}function es(e,t,n=!0){var r=e.reactions;if(r!==null&&!lt?.includes(e))for(var s=0;s<r.length;s++){var a=r[s];(a.f&be)!==0?es(a,t,!1):t===a&&(n?me(a,$e):(a.f&ge)!==0&&me(a,Ze),Dt(a))}}function ts(e){var t=Pe,n=Oe,r=ze,s=N,a=lt,i=X,u=Ge,o=Tt,f=e.f;Pe=null,Oe=0,ze=null,N=(f&(ft|Mt))===0?e:null,lt=null,Jt(e.ctx),Ge=!1,Tt=++un,e.ac!==null&&(Qn(()=>{e.ac.abort(qt)}),e.ac=null);try{e.f|=Ln;var d=e.fn,p=d(),v=e.deps;if(Pe!==null){var _;if(Tn(e,Oe),v!==null&&Oe>0)for(v.length=Oe+Pe.length,_=0;_<Pe.length;_++)v[Oe+_]=Pe[_];else e.deps=v=Pe;if(wt&&fn()&&(e.f&Ve)!==0)for(_=Oe;_<v.length;_++)(v[_].reactions??=[]).push(e)}else v!==null&&Oe<v.length&&(Tn(e,Oe),v.length=Oe);if(dn()&&ze!==null&&!Ge&&v!==null&&(e.f&(be|Ze|$e))===0)for(_=0;_<ze.length;_++)es(ze[_],e);return s!==null&&s!==e&&(un++,ze!==null&&(r===null?r=ze:r.push(...ze))),(e.f&bt)!==0&&(e.f^=bt),p}catch(x){return Cr(x)}finally{e.f^=Ln,Pe=t,Oe=n,ze=r,N=s,lt=a,Jt(i),Ge=u,Tt=o}}function fa(e,t){let n=t.reactions;if(n!==null){var r=cs.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&be)!==0&&(Pe===null||!Pe.includes(t))&&(me(t,Ze),(t.f&Ve)!==0&&(t.f^=Ve,t.f&=~kt),Nr(t),Tn(t,0))}function Tn(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)fa(e,n[r])}function Xt(e){var t=e.f;if((t&it)===0){me(e,ge);var n=R,r=wt;R=e,wt=!0;try{(t&(ot|ps))!==0?ia(e):Hr(e),Kr(e);var s=ts(e);e.teardown=typeof s=="function"?s:null,e.wv=Zr;var a;Rn&&Ls&&(e.f&$e)!==0&&e.deps}finally{wt=r,R=n}}}function l(e){var t=e.f,n=(t&be)!==0;if(N!==null&&!Ge){var r=R!==null&&(R.f&it)!==0;if(!r&&!lt?.includes(e)){var s=N.deps;if((N.f&Ln)!==0)e.rv<un&&(e.rv=un,Pe===null&&s!==null&&s[Oe]===e?Oe++:Pe===null?Pe=[e]:Pe.includes(e)||Pe.push(e));else{(N.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[N]:a.includes(N)||a.push(N)}}}if(Ot){if(yt.has(e))return yt.get(e);if(n){var i=e,u=i.v;return((i.f&ge)===0&&i.reactions!==null||rs(i))&&(u=Zn(i)),yt.set(i,u),u}}else n&&(!qe?.has(e)||W?.is_fork&&!fn())&&(i=e,en(i)&&Rr(i),wt&&fn()&&(i.f&Ve)===0&&ns(i));if(qe?.has(e))return qe.get(e);if((e.f&bt)!==0)throw e.v;return e.v}function ns(e){if(e.deps!==null){e.f^=Ve;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&be)!==0&&(t.f&Ve)===0&&ns(t)}}function rs(e){if(e.v===we)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(yt.has(t)||(t.f&be)!==0&&rs(t))return!0;return!1}function m(e){var t=Ge;try{return Ge=!0,e()}finally{Ge=t}}const ua=-7169;function me(e,t){e.f=e.f&ua|t}function $(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Kt in e)Bn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Kt in n&&Bn(n)}}}function Bn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{Bn(e[r],t)}catch{}const n=wr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=ds(n);for(let s in r){const a=r[s].get;if(a)try{a.call(e)}catch{}}}}}const ca=["touchstart","touchmove"];function da(e){return ca.includes(e)}const va=new Set,vr=new Set;function _a(e,t,n,r={}){function s(a){if(r.capture||sn.call(t,a),!a.cancelBubble)return Qn(()=>n?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?vn(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function D(e,t,n,r,s){var a={capture:r,passive:s},i=_a(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&er(()=>{t.removeEventListener(e,i,a)})}let _r=null;function sn(e){var t=this,n=t.ownerDocument,r=e.type,s=e.composedPath?.()||[],a=s[0]||e.target;_r=e;var i=0,u=_r===e&&e.__root;if(u){var o=s.indexOf(u);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var f=s.indexOf(t);if(f===-1)return;o<=f&&(i=o)}if(a=s[i]||e.target,a!==t){yr(e,"currentTarget",{configurable:!0,get(){return a||n}});var d=N,p=R;Ae(null),Xe(null);try{for(var v,_=[];a!==null;){var x=a.assignedSlot||a.parentNode||a.host||null;try{var T=a["__"+r];T!=null&&(!a.disabled||e.target===a)&&T.call(a,e)}catch(c){v?_.push(c):v=c}if(e.cancelBubble||x===t||x===null)break;a=x}if(v){for(let c of _)queueMicrotask(()=>{throw c});throw v}}finally{e.__root=t,delete e.currentTarget,Ae(d),Xe(p)}}}function ss(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","\x3C!---->"),t.content}function kn(e,t){var n=R;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function C(e,t){var n=(t&Is)!==0,r=(t&Ns)!==0,s,a=!e.startsWith("<!>");return()=>{s===void 0&&(s=ss(a?e:"<!>"+e),n||(s=pt(s)));var i=r||zr?document.importNode(s,!0):s.cloneNode(!0);if(n){var u=pt(i),o=i.lastChild;kn(u,o)}else kn(i,i);return i}}function Ne(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Et();return e.append(t,n),kn(t,n),e}function P(e,t){e!==null&&e.before(t)}function se(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function ha(e,t){return pa(e,t)}const Ft=new Map;function pa(e,{target:t,anchor:n,props:r={},events:s,context:a,intro:i=!0}){ea();var u=new Set,o=p=>{for(var v=0;v<p.length;v++){var _=p[v];if(!u.has(_)){u.add(_);var x=da(_);t.addEventListener(_,sn,{passive:x});var T=Ft.get(_);T===void 0?(document.addEventListener(_,sn,{passive:x}),Ft.set(_,1)):Ft.set(_,T+1)}}};o(Yn(va)),vr.add(o);var f=void 0,d=sa(()=>{var p=n??t.appendChild(Et());return Vs(p,{pending:()=>{}},v=>{if(a){$t({});var _=X;_.c=a}s&&(r.$$events=s),f=e(v,r)||{},a&&Ct()}),()=>{for(var v of u){t.removeEventListener(v,sn);var _=Ft.get(v);--_===0?(document.removeEventListener(v,sn),Ft.delete(v)):Ft.set(v,_)}vr.delete(o),p!==n&&p.parentNode?.removeChild(p)}});return ga.set(f,d),f}let ga=new WeakMap;class ma{anchor;#e=new Map;#t=new Map;#r=new Map;#n=new Set;#o=!0;constructor(t,n=!0){this.anchor=t,this.#o=n}#a=()=>{var t=W;if(this.#e.has(t)){var n=this.#e.get(t),r=this.#t.get(n);if(r)sr(r),this.#n.delete(n);else{var s=this.#r.get(n);s&&(this.#t.set(n,s.effect),this.#r.delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[a,i]of this.#e){if(this.#e.delete(a),a===t)break;const u=this.#r.get(i);u&&(Me(u.effect),this.#r.delete(i))}for(const[a,i]of this.#t){if(a===n||this.#n.has(a))continue;const u=()=>{if(Array.from(this.#e.values()).includes(a)){var f=document.createDocumentFragment();Xr(i,f),f.append(Et()),this.#r.set(a,{effect:i,fragment:f})}else Me(i);this.#n.delete(a),this.#t.delete(a)};this.#o||!r?(this.#n.add(a),Ht(i,u,!1)):u()}}};#s=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[r,s]of this.#r)n.includes(r)||(Me(s.effect),this.#r.delete(r))};ensure(t,n){var r=W,s=Br();if(n&&!this.#t.has(t)&&!this.#r.has(t))if(s){var a=document.createDocumentFragment(),i=Et();a.append(i),this.#r.set(t,{effect:je(()=>n(i)),fragment:a})}else this.#t.set(t,je(()=>n(this.anchor)));if(this.#e.set(r,t),s){for(const[u,o]of this.#t)u===t?r.skipped_effects.delete(o):r.skipped_effects.add(o);for(const[u,o]of this.#r)u===t?r.skipped_effects.delete(o.effect):r.skipped_effects.add(o.effect);r.oncommit(this.#a),r.ondiscard(this.#s)}else this.#a()}}function ae(e,t,n=!1){var r=new ma(e),s=n?Yt:0;function a(i,u){r.ensure(i,u)}nr(()=>{var i=!1;t((u,o=!0)=>{i=!0,a(o,u)}),i||a(!1,null)},s)}function hr(e,t,n=!1,r=!1,s=!1){var a=e,i="";G(()=>{var u=R;if(i!==(i=t()??"")&&(u.nodes_start!==null&&(Yr(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),i!=="")){var o=i+"";n?o=`<svg>${o}</svg>`:r&&(o=`<math>${o}</math>`);var f=ss(o);if((n||r)&&(f=pt(f)),kn(pt(f),f.lastChild),n||r)for(;pt(f);)a.before(pt(f));else a.before(f)}})}const pr=[...` 	
\r\f \v\uFEFF`];function ba(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var a=s.length,i=0;(i=r.indexOf(s,i))>=0;){var u=i+a;(i===0||pr.includes(r[i-1]))&&(u===r.length||pr.includes(r[u]))?r=(i===0?"":r.substring(0,i))+r.substring(u+1):i=u}}return r===""?null:r}function ya(e,t){return e==null?null:String(e)}function Ie(e,t,n,r,s,a){var i=e.__className;if(i!==n||i===void 0){var u=ba(n,r,a);u==null?e.removeAttribute("class"):e.className=u,e.__className=n}else if(a&&s!==a)for(var o in a){var f=!!a[o];(s==null||f!==!!s[o])&&e.classList.toggle(o,f)}return a}function cn(e,t,n,r){var s=e.__style;if(s!==t){var a=ya(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return r}function tn(e=!1){const t=X,n=t.l.u;if(!n)return;let r=()=>$(t.s);if(e){let s=0,a={};const i=Xn(()=>{let u=!1;const o=t.s;for(const f in o)o[f]!==a[f]&&(a[f]=o[f],u=!0);return u&&s++,s});r=()=>l(i)}n.b.length&&ra(()=>{gr(t,r),xn(n.b)}),qn(()=>{const s=m(()=>n.m.map(hs));return()=>{for(const a of s)typeof a=="function"&&a()}}),n.a.length&&qn(()=>{gr(t,r),xn(n.a)})}function gr(e,t){if(e.l.s)for(const n of e.l.s)l(n);t()}function ar(e,t,n){if(e==null)return t(void 0),n&&n(void 0),mt;const r=m(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const zt=[];function wa(e,t){return{subscribe:$n(e,t).subscribe}}function $n(e,t=mt){let n=null;const r=new Set;function s(u){if(Mr(e,u)&&(e=u,n)){const o=!zt.length;for(const f of r)f[1](),zt.push(f,e);if(o){for(let f=0;f<zt.length;f+=2)zt[f][0](zt[f+1]);zt.length=0}}}function a(u){s(u(e))}function i(u,o=mt){const f=[u,o];return r.add(f),r.size===1&&(n=t(s,a)||mt),u(e),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:s,update:a,subscribe:i}}function Ea(e,t,n){const r=!Array.isArray(e),s=r?[e]:e;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return wa(n,(i,u)=>{let o=!1;const f=[];let d=0,p=mt;const v=()=>{if(d)return;p();const x=t(r?f[0]:f,i,u);a?i(x):p=typeof x=="function"?x:mt},_=s.map((x,T)=>ar(x,c=>{f[T]=c,d&=~(1<<T),o&&v()},()=>{d|=1<<T}));return o=!0,v(),function(){xn(_),p(),o=!1}})}function xa(e){let t;return ar(e,n=>t=n)(),t}let wn=!1,Un=Symbol();function on(e,t,n){const r=n[t]??={store:null,source:H(void 0),unsubscribe:mt};if(r.store!==e&&!(Un in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=mt;else{var s=!0;r.unsubscribe=ar(e,a=>{s?r.source.v=a:M(r.source,a)}),s=!1}return e&&Un in n?xa(e):l(r.source)}function ir(){const e={};function t(){er(()=>{for(var n in e)e[n].unsubscribe();yr(e,Un,{enumerable:!1,value:!0})})}return[e,t]}function Pa(e){var t=wn;try{return wn=!1,[e(),wn]}finally{wn=t}}function at(e,t,n,r){var s=!Qt||(n&$s)!==0,a=(n&Os)!==0,i=r,u=!0,o=()=>(u&&(u=!1,i=r),i),f;{var d=Kt in e||gs in e;f=Vt(e,t)?.set??(d&&t in e?h=>e[t]=h:void 0)}var p,v=!1;[p,v]=Pa(()=>e[t]),p===void 0&&r!==void 0&&(p=o(),f&&(s&&Ps(),f(p)));var _;if(s?_=()=>{var h=e[t];return h===void 0?o():(u=!0,h)}:_=()=>{var h=e[t];return h!==void 0&&(i=void 0),h===void 0?i:h},s&&(n&Cs)===0)return _;if(f){var x=e.$$legacy;return(function(h,w){return arguments.length>0?((!s||!w||x||v)&&f(w?_():h),h):_()})}var T=!1,c=oe(()=>(T=!1,_()));l(c);var g=R;return(function(h,w){if(arguments.length>0){const A=w?l(c):s&&a?Ut(h):h;return M(c,A),T=!0,i!==void 0&&(i=A),h}return Ot&&T||(g.f&it)!==0?c.v:l(c)})}function Sa(e){X===null&&ms(),Qt&&X.l!==null?Ta(X).m.push(e):qn(()=>{const t=m(e);if(typeof t=="function")return t})}function Ta(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const ka="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(ka);Fs();const gt=$n({}),En=$n([]),jt=$n([]),Da=Ea(gt,e=>Object.values(e).find(t=>t.parent==="user"));Da.subscribe(e=>{e&&jt.update(t=>t.length===0?[{id:0,agentIds:[e.id]}]:t)});function mr(e){const n=e.split(`
`).filter(i=>i.trim()).map(i=>JSON.parse(i)),r={},s=[];for(const i of n)i.event_type==="agent_created"&&(r[i.agent]={id:i.agent,name:i.name,parent:i.parent,children:[],systemPrompts:[]});for(const i of Object.values(r))i.parent&&i.parent!=="user"&&r[i.parent]&&r[i.parent].children.push(i.id);const a=new Map;for(const i of n)i.event_type==="transcript_entry"&&i.role==="tool"&&i.tool_call_id&&a.set(i.tool_call_id,i);for(const i of n)if(i.event_type==="transcript_entry")if(i.role==="system"&&r[i.agent])r[i.agent].systemPrompts.push(i.content);else if(i.role==="user")s.push({id:i.message_id,agent:i.agent,role:"user",content:i.content,substance:i.substance});else if(i.role==="assistant"&&i.tool_calls){const u=i.tool_calls.map(o=>{const f=a.get(o.id),d={...o};return f&&(d.result={role:f.role,content:f.content,name:f.name}),d});s.push({id:i.message_id,agent:i.agent,role:"assistant_tool_use",tool_calls:u,substance:i.substance})}else i.role==="assistant"&&!i.tool_calls&&s.push({id:i.message_id,agent:i.agent,role:"assistant",content:i.content,substance:i.substance});return{agents:r,messages:s}}function Aa(e){const t=new Set,n=new Set,r=[];for(const s of e){if(s.substance){if(n.has(s.substance))continue;n.add(s.substance)}const a=s.role==="assistant_tool_use"?`${s.role}:${s.id}`:`${s.role}:${s.content}`;t.has(a)||(t.add(a),s.substance||n.add(s.id),r.push(s))}return r}function lr(e){const n=new TextEncoder().encode(e);let r=3735928559,s=1103547991;for(let a=0;a<n.length;a++){const i=n[a];r=Math.imul(r^i,2654435761),s=Math.imul(s^i,1597334677),r=r<<13|r>>>19,s=s<<17|s>>>15}return r=Math.imul(r^r>>>16,2246822507),r=Math.imul(r^r>>>13,3266489909),r=(r^r>>>16)>>>0,s=Math.imul(s^s>>>16,2246822507),s=Math.imul(s^s>>>13,3266489909),s=(s^s>>>16)>>>0,r+s>>>0}function Vn(e){return`hsl(${lr(e)%360}, 45%, 85%)`}function Dn(e){return`hsl(${lr(e)%360}, 60%, 35%)`}function Kn(e){return`hsl(${lr(e)%360}, 50%, 70%)`}var Ma=C('<span class="toggle svelte-1ulaew4" role="button" tabindex="0"> </span>'),$a=C('<span class="toggle-spacer svelte-1ulaew4"></span>'),Ca=C('<span class="separator svelte-1ulaew4">▸</span> <!>',1),Oa=C('<div><div class="agent-item svelte-1ulaew4"><!> <span class="agent-badge svelte-1ulaew4" role="button" tabindex="0" draggable="true"> </span> <!></div> <!></div>');function Hn(e,t){$t(t,!1);const n=()=>on(gt,"$agents",r),[r,s]=ir(),a=H(),i=H(),u=H(),o=H(),f=H(),d=H(),p=H();let v=at(t,"agent",8),_=at(t,"depth",8,0),x=at(t,"inline",8,!1),T=H(!0);function c(j){j.dataTransfer.effectAllowed="copy",j.dataTransfer.setData("application/json",JSON.stringify({agentId:v().id}))}function g(){M(T,!l(T))}function h(j){(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),g())}Ee(()=>($(v()),n()),()=>{M(a,v().children.map(j=>n()[j]).filter(Boolean))}),Ee(()=>l(a),()=>{M(i,l(a).length>0)}),Ee(()=>l(a),()=>{M(u,l(a).length===1)}),Ee(()=>l(a),()=>{M(o,l(a).length>1)}),Ee(()=>$(v()),()=>{M(f,v().id+"_"+v().name)}),Ee(()=>l(f),()=>{M(d,Vn(l(f)))}),Ee(()=>l(f),()=>{M(p,Kn(l(f)))}),hn(),tn();var w=Oa();let A;var z=S(w),Y=S(z);{var ie=j=>{var Se=Ne(),Le=Q(Se);{var Ke=F=>{var B=Ma(),le=S(B);G(()=>se(le,l(T)?"▼":"▶")),D("click",B,g),D("keydown",B,h),P(F,B)},xt=F=>{var B=$a();P(F,B)};ae(Le,F=>{l(o)?F(Ke):F(xt,!1)})}P(j,Se)};ae(Y,j=>{x()||j(ie)})}var U=O(Y,2),ee=S(U),ve=O(U,2);{var te=j=>{var Se=Ca(),Le=O(Q(Se),2);Hn(Le,{get agent(){return l(a),m(()=>l(a)[0])},get depth(){return _()},inline:!0}),P(j,Se)};ae(ve,j=>{l(u)&&j(te)})}var fe=O(z,2);{var ct=j=>{var Se=Ne(),Le=Q(Se);pe(Le,1,()=>l(a),Ke=>Ke.id,(Ke,xt)=>{var F=Ne(),B=Q(F);{let le=oe(()=>_()+1);Hn(B,{get agent(){return l(xt)},get depth(){return l(le)}})}P(Ke,F)}),P(j,Se)};ae(fe,j=>{l(T)&&l(o)&&j(ct)})}G(()=>{A=Ie(w,1,"agent-node svelte-1ulaew4",null,A,{inline:x()}),cn(w,`margin-left: ${x()?0:_()*20}px`),cn(U,`background-color: ${l(d)??""}; border-color: ${l(p)??""};`),se(ee,($(v()),m(()=>v().name)))}),D("dragstart",U,c),P(e,w),Ct(),s()}var Ia=C('<p class="empty svelte-5r6xef">No agents found in log</p>'),Na=C('<div class="hierarchy svelte-5r6xef"><!></div>');function Ra(e,t){$t(t,!1);const n=()=>on(gt,"$agents",r),[r,s]=ir(),a=H();Ee(()=>n(),()=>{M(a,Object.values(n()).filter(d=>d.parent==="user"))}),hn(),tn();var i=Na(),u=S(i);{var o=d=>{var p=Ia();P(d,p)},f=d=>{var p=Ne(),v=Q(p);pe(v,1,()=>l(a),_=>_.id,(_,x)=>{Hn(_,{get agent(){return l(x)}})}),P(d,p)};ae(u,d=>{l(a),m(()=>l(a).length===0)?d(o):d(f,!1)})}P(e,i),Ct(),s()}var La=C('<div class="message-content svelte-kszgzy"><span class="agent-prefix svelte-kszgzy"> </span> </div>'),Fa=C('<div class="message-content svelte-kszgzy"> </div>'),za=C("<div><!></div>");function ja(e,t){$t(t,!1);const n=H(),r=H(),s=H(),a=H();let i=at(t,"message",8),u=at(t,"agentName",8,""),o=at(t,"agentId",8,""),f=at(t,"showPrefix",8,!1);Ee(()=>$(i()),()=>{M(n,i().role==="user")}),Ee(()=>$(i()),()=>{M(r,i().role==="assistant")}),Ee(()=>($(o()),$(u())),()=>{M(s,o()&&u()?o()+"_"+u():o())}),Ee(()=>(l(s),Dn),()=>{M(a,l(s)?Dn(l(s)):"#333")}),hn(),tn();var d=za();let p;var v=S(d);{var _=T=>{var c=La(),g=S(c),h=S(g),w=O(g);G(()=>{cn(g,`color: ${l(a)??""};`),se(h,`[${u()??""}]:`),se(w,` ${$(i()),m(()=>i().content)??""}`)}),P(T,c)},x=T=>{var c=Fa(),g=S(c);G(()=>se(g,($(i()),m(()=>i().content)))),P(T,c)};ae(v,T=>{l(r)&&f()&&u()?T(_):T(x,!1)})}G(()=>p=Ie(d,1,"message svelte-kszgzy",null,p,{user:l(n),assistant:l(r)})),P(e,d),Ct()}var qa=C('<div class="field-line svelte-g00oa"><span class="field-name svelte-g00oa"> </span> </div>'),Ba=C("<span>,</span>"),Ua=C("<button> </button><!>",1),Va=C('<div class="field-line svelte-g00oa"><span class="field-name svelte-g00oa"> </span> </div>'),Ka=C('<div class="detail-line svelte-g00oa"><span class="field-name svelte-g00oa"> </span>: <!> </div>'),Ha=C('<div class="detail-line svelte-g00oa"><span class="field-name svelte-g00oa"> </span>: <!> </div>'),Ya=C('<hr class="divider svelte-g00oa"/> <div class="tool-result-details svelte-g00oa"><div class="details-display svelte-g00oa"></div></div>',1),Ja=C('<hr class="divider svelte-g00oa"/> <div class="tool-call-details svelte-g00oa"><div class="details-display svelte-g00oa"></div></div> <!>',1),Wa=C('<div class="modal-backdrop svelte-g00oa" role="dialog" aria-modal="true"><div class="modal-content svelte-g00oa"><div class="modal-header svelte-g00oa"><h2 class="svelte-g00oa">Tool Usage Details</h2> <button class="close-btn svelte-g00oa" aria-label="Close">&times;</button></div> <div class="modal-body svelte-g00oa"><div class="message-fields svelte-g00oa"><div class="fields-display svelte-g00oa"><!> <div class="field-line svelte-g00oa"><span class="field-name svelte-g00oa">tool_calls</span>: [ <!> <span> </span></div> <!></div></div> <!></div></div></div>');function Ga(e,t){$t(t,!1);const n=H();let r=at(t,"toolUseMessage",8,null),s=at(t,"onClose",8,()=>{}),a=H(null);function i(h){M(a,h)}function u(h){h.target===h.currentTarget&&s()()}function o(h){h.key==="Escape"&&s()()}function f(h){if(!h)return[];const w=[];return w.push({key:"message_id",value:`"${h.id}"`}),w.push({key:"event_type",value:'"transcript_entry"'}),w.push({key:"agent",value:`"${h.agent}"`}),w.push({key:"role",value:'"assistant"'}),w}function d(h){return!h||!h.substance?null:{key:"substance",value:`"${h.substance}"`}}function p(h,w=0){if(h==null)return"null";if(typeof h=="string")return`"${v(h)}"`;if(typeof h=="number"||typeof h=="boolean")return String(h);if(Array.isArray(h))return h.length===0?"[]":`[
`+h.map(z=>p(z,w+2)).map(z=>" ".repeat(w+2)+z).join(`,
`)+`
`+" ".repeat(w)+"]";if(typeof h=="object"){const A=Object.entries(h);return A.length===0?"{}":`{
`+A.map(([Y,ie])=>{const U=" ".repeat(w+2),ee=p(ie,w+2);return`${U}<b>${v(Y)}</b>: ${ee}`}).join(`,
`)+`
`+" ".repeat(w)+"}"}return String(h)}function v(h){const w=document.createElement("div");return w.textContent=h,w.innerHTML}function _(h){if(!h)return[];const{result:w,...A}=h;return Object.entries(A).map(([z,Y])=>({key:z,value:p(Y,0)}))}function x(h){return h?Object.entries(h).map(([w,A])=>({key:w,value:p(A,0)})):[]}Ee(()=>$(r()),()=>{r()&&r().tool_calls&&r().tool_calls.length>0?M(a,0):M(a,null)}),Ee(()=>(l(a),$(r())),()=>{M(n,l(a)!==null?r()?.tool_calls[l(a)]:null)}),hn(),tn();var T=Ne();D("keydown",jn,o);var c=Q(T);{var g=h=>{var w=Wa(),A=S(w),z=S(A),Y=O(S(z),2),ie=O(z,2),U=S(ie),ee=S(U),ve=S(ee);pe(ve,1,()=>($(r()),m(()=>f(r()))),an,(F,B)=>{var le=qa(),b=S(le),y=S(b),E=O(b);G(()=>{se(y,(l(B),m(()=>l(B).key))),se(E,`: ${l(B),m(()=>l(B).value)??""},`)}),P(F,le)});var te=O(ve,2),fe=O(S(te),2);pe(fe,3,()=>($(r()),m(()=>r().tool_calls)),F=>F.id,(F,B,le)=>{var b=Ua(),y=Q(b);let E;var k=S(y),I=O(y);{var J=ue=>{var L=Ba();P(ue,L)};ae(I,ue=>{$(l(le)),$(r()),m(()=>l(le)<r().tool_calls.length-1)&&ue(J)})}G(()=>{E=Ie(y,1,"inline-tool-button svelte-g00oa",null,E,{selected:l(a)===l(le)}),se(k,(l(B),m(()=>l(B).function?.name||"unknown")))}),D("click",y,()=>i(l(le))),P(F,b)});var ct=O(fe,2),j=S(ct),Se=O(te,2);{var Le=F=>{const B=oe(()=>($(r()),m(()=>d(r()))));var le=Va(),b=S(le),y=S(b),E=O(b);G(()=>{se(y,($(l(B)),m(()=>l(B).key))),se(E,`: ${$(l(B)),m(()=>l(B).value)??""}`)}),P(F,le)};ae(Se,F=>{$(r()),m(()=>d(r()))&&F(Le)})}var Ke=O(U,2);{var xt=F=>{var B=Ja(),le=O(Q(B),2),b=S(le);pe(b,5,()=>(l(n),m(()=>_(l(n)))),an,(k,I,J)=>{var ue=Ka(),L=S(ue),Te=S(L),ne=O(L,2);hr(ne,()=>(l(I),m(()=>l(I).value)));var Be=O(ne,1,!0);G(Qe=>{se(Te,(l(I),m(()=>l(I).key))),se(Be,Qe)},[()=>(l(n),m(()=>J<_(l(n)).length-1?",":""))]),P(k,ue)});var y=O(le,2);{var E=k=>{var I=Ya(),J=O(Q(I),2),ue=S(J);pe(ue,5,()=>(l(n),m(()=>x(l(n).result))),an,(L,Te,ne)=>{var Be=Ha(),Qe=S(Be),Cn=S(Qe),pn=O(Qe,2);hr(pn,()=>(l(Te),m(()=>l(Te).value)));var V=O(pn,1,!0);G(K=>{se(Cn,(l(Te),m(()=>l(Te).key))),se(V,K)},[()=>(l(n),m(()=>ne<x(l(n).result).length-1?",":""))]),P(L,Be)}),P(k,I)};ae(y,k=>{l(n),m(()=>l(n).result)&&k(E)})}P(F,B)};ae(Ke,F=>{l(n)&&F(xt)})}G(F=>se(j,`]${F??""}`),[()=>($(r()),m(()=>d(r())?",":""))]),D("click",Y,function(...F){s()?.apply(this,F)}),D("click",w,u),P(h,w)};ae(c,h=>{r()&&h(g)})}P(e,T),Ct()}var Xa=C('<div class="empty-state-container svelte-r539bm"><div class="empty-state-header svelte-r539bm" role="region" aria-label="Drop zone for first panel"><div class="empty-state-text svelte-r539bm">Drag an agent here to view its transcript</div></div></div>'),Za=C('<span class="agent-badge svelte-r539bm" role="button" tabindex="0" draggable="true"> <button class="remove-btn svelte-r539bm">×</button></span>'),Qa=C('<div role="region" aria-label="Drop zone to insert panel"></div> <div role="region" aria-label="Panel header drop zone"><div class="agent-badges svelte-r539bm"></div></div>',1),ei=C('<div class="system-prompt-box svelte-r539bm"><div class="system-prompt-content svelte-r539bm"> </div></div>'),ti=C('<div class="system-prompt-box svelte-r539bm"><div class="system-prompt-agent-name svelte-r539bm"> </div> <div class="system-prompt-content svelte-r539bm"> </div></div>'),ni=C('<div role="region" aria-label="Drop zone to insert panel"></div> <div class="system-prompts-cell svelte-r539bm" role="region" aria-label="Panel drop zone"><!></div>',1),ri=C('<div class="empty-state svelte-r539bm">No messages to display</div>'),si=C('<span class="agent-prefix svelte-r539bm"> </span>'),ai=C('<span class="tool-icon svelte-r539bm" role="button" tabindex="0" title="Click to view tool usage details">○</span>'),ii=C('<div class="tool-group svelte-r539bm"><!> <!></div>'),li=C('<div role="region" aria-label="Panel drop zone"></div>'),oi=C('<div role="region" aria-label="Drop zone to insert panel"></div> <!>',1),fi=C('<div><!> <div role="region" aria-label="Drop zone to insert panel"></div></div>'),ui=C('<div class="messages-scroll-container svelte-r539bm"><div class="panel-headers svelte-r539bm"><!> <div role="region" aria-label="Drop zone to insert panel"></div></div> <div class="system-prompts-row svelte-r539bm"><!> <div role="region" aria-label="Drop zone to insert panel"></div></div> <div class="messages-grid svelte-r539bm"><!></div></div>'),ci=C('<div class="panels-container svelte-r539bm"><!></div> <!>',1);function di(e,t){$t(t,!1);const n=()=>on(En,"$allMessages",a),r=()=>on(jt,"$panels",a),s=()=>on(gt,"$agents",a),[a,i]=ir(),u=H(),o=H();let f=1,d=H(null),p=H(null),v=H(null);function _(b){M(v,b)}function x(){M(v,null)}function T(b){const y={id:f++,agentIds:[b]};jt.update(E=>[...E,y])}function c(b,y){const E={id:f++,agentIds:[b]};jt.update(k=>{const I=[...k];return I.splice(y,0,E),I})}function g(b,y){jt.update(E=>E.map(k=>k.id===b&&!k.agentIds.includes(y)?{...k,agentIds:[...k.agentIds,y]}:k))}function h(b,y){jt.update(E=>E.map(I=>I.id===b?{...I,agentIds:I.agentIds.filter(J=>J!==y)}:I).filter(I=>I.agentIds.length>0))}function w(b,y,E){E.stopPropagation(),E.dataTransfer.effectAllowed="move",E.dataTransfer.setData("application/json",JSON.stringify({agentId:y,fromPanel:b}))}function A(b,y,E){E.dataTransfer.dropEffect==="none"&&h(b,y)}function z(b,y){y.preventDefault(),y.stopPropagation(),M(p,null);const E=JSON.parse(y.dataTransfer.getData("application/json"));E.agentId&&(E.fromPanel!==void 0&&E.fromPanel!==b&&h(E.fromPanel,E.agentId),g(b,E.agentId))}function Y(b,y){y.preventDefault(),y.stopPropagation(),M(p,b)}function ie(b){b.preventDefault(),b.stopPropagation(),M(p,null)}function U(b,y){y.preventDefault(),y.stopPropagation(),M(d,null);const E=JSON.parse(y.dataTransfer.getData("application/json"));E.agentId&&(E.fromPanel!==void 0&&h(E.fromPanel,E.agentId),c(E.agentId,b))}function ee(b){b.preventDefault();const y=JSON.parse(b.dataTransfer.getData("application/json"));y.agentId&&(y.fromPanel!==void 0&&h(y.fromPanel,y.agentId),T(y.agentId))}function ve(b,y){y.preventDefault(),y.stopPropagation(),M(d,b)}function te(b){b.preventDefault(),M(d,null)}function fe(b,y){return y.agentIds.includes(b.agent)}function ct(b,y){const E=new Map;for(const k of y){const I=b.filter(ue=>fe(ue,k)),J=Aa(I);E.set(k.id,new Set(J.map(ue=>ue.id)))}return E}function j(b,y,E){const k=[],I=new Map,J=new Map,ue=new Set;for(const L of b){if(ue.has(L.id))continue;let Te=!1;for(const Be of E)if(y.get(Be.id)?.has(L.id)){Te=!0;break}if(!Te)continue;let ne;if(L.substance)I.has(L.substance)?(ne=I.get(L.substance),k[ne].messages.push(L)):J.has(L.substance)?(ne=J.get(L.substance),k[ne].messages.push(L),I.set(L.substance,ne)):(ne=k.length,I.set(L.substance,ne),k.push({substance:L.substance,messages:[L]}));else{if(L.role==="assistant_tool_use"&&k.length>0){const Be=k[k.length-1],Qe=Be.messages[Be.messages.length-1];Qe.role==="assistant_tool_use"&&Qe.agent===L.agent?(ne=k.length-1,k[ne].messages.push(L)):(ne=k.length,k.push({substance:null,messages:[L]}))}else ne=k.length,k.push({substance:null,messages:[L]});J.set(L.id,ne)}ue.add(L.id)}return k}function Se(b){const y=[];let E=0;for(;E<b.length;){const k=b[E];if(k.role==="assistant_tool_use"){const I=[k];let J=E+1;for(;J<b.length&&b[J].role==="assistant_tool_use"&&b[J].agent===k.agent;)I.push(b[J]),J++;y.push({type:"tool_group",agent:k.agent,messages:I}),E=J}else y.push({type:"message",message:k}),E++}return y}Ee(()=>(n(),r()),()=>{M(u,ct(n(),r()))}),Ee(()=>(n(),l(u),r()),()=>{M(o,j(n(),l(u),r()))}),hn(),tn();var Le=ci(),Ke=Q(Le),xt=S(Ke);{var F=b=>{var y=Xa(),E=S(y);D("dragover",E,k=>k.preventDefault()),D("drop",E,ee),P(b,y)},B=b=>{var y=ui(),E=S(y),k=S(E);pe(k,3,r,V=>V.id,(V,K,et)=>{var tt=Qa(),ce=Q(tt);let Pt;var Fe=O(ce,2);let dt;var It=S(Fe);pe(It,5,()=>(l(K),m(()=>l(K).agentIds)),ye=>ye,(ye,q)=>{const ke=oe(()=>(s(),l(q),m(()=>s()[l(q)])));var Z=Ne(),He=Q(Z);{var Ye=_e=>{const he=oe(()=>(l(q),$(l(ke)),m(()=>l(q)+"_"+l(ke).name)));var Ce=Za(),vt=S(Ce),xe=O(vt);G((re,nt)=>{cn(Ce,`background-color: ${re??""}; border-color: ${nt??""};`),se(vt,`${$(l(ke)),m(()=>l(ke).name)??""} `)},[()=>($(Vn),$(l(he)),m(()=>Vn(l(he)))),()=>($(Kn),$(l(he)),m(()=>Kn(l(he))))]),D("click",xe,()=>h(l(K).id,l(q))),D("dragstart",Ce,re=>w(l(K).id,l(q),re)),D("dragend",Ce,re=>A(l(K).id,l(q),re)),P(_e,Ce)};ae(He,_e=>{l(ke)&&_e(Ye)})}P(ye,Z)}),G(()=>{Pt=Ie(ce,1,"divider-drop-zone svelte-r539bm",null,Pt,{hovered:l(d)===`divider-${l(et)}`}),dt=Ie(Fe,1,"panel-header svelte-r539bm",null,dt,{hovered:l(p)===l(K).id})}),D("dragover",ce,ye=>ve(`divider-${l(et)}`,ye)),D("dragleave",ce,te),D("drop",ce,ye=>U(l(et),ye)),D("dragover",Fe,ye=>Y(l(K).id,ye)),D("dragleave",Fe,ie),D("drop",Fe,ye=>z(l(K).id,ye)),P(V,tt)});var I=O(k,2);let J;var ue=O(E,2),L=S(ue);pe(L,3,r,V=>V.id,(V,K,et)=>{var tt=ni(),ce=Q(tt);let Pt;var Fe=O(ce,2),dt=S(Fe);{var It=q=>{const ke=oe(()=>(l(K),m(()=>l(K).agentIds[0]))),Z=oe(()=>(s(),$(l(ke)),m(()=>s()[l(ke)])));var He=Ne(),Ye=Q(He);{var _e=he=>{var Ce=Ne(),vt=Q(Ce);pe(vt,1,()=>($(l(Z)),m(()=>l(Z).systemPrompts)),an,(xe,re)=>{var nt=ei(),_t=S(nt),nn=S(_t);G(()=>se(nn,l(re))),P(xe,nt)}),P(he,Ce)};ae(Ye,he=>{$(l(Z)),m(()=>l(Z)&&l(Z).systemPrompts&&l(Z).systemPrompts.length>0)&&he(_e)})}P(q,He)},ye=q=>{var ke=Ne(),Z=Q(ke);pe(Z,1,()=>(l(K),m(()=>l(K).agentIds)),He=>He,(He,Ye)=>{const _e=oe(()=>(s(),l(Ye),m(()=>s()[l(Ye)])));var he=Ne(),Ce=Q(he);{var vt=xe=>{var re=Ne(),nt=Q(re);pe(nt,1,()=>($(l(_e)),m(()=>l(_e).systemPrompts)),an,(_t,nn)=>{var rt=ti(),rn=S(rt),De=S(rn),de=O(rn,2),gn=S(de);G(()=>{se(De,($(l(_e)),m(()=>l(_e).name))),se(gn,l(nn))}),P(_t,rt)}),P(xe,re)};ae(Ce,xe=>{$(l(_e)),m(()=>l(_e)&&l(_e).systemPrompts&&l(_e).systemPrompts.length>0)&&xe(vt)})}P(He,he)}),P(q,ke)};ae(dt,q=>{l(K),m(()=>l(K).agentIds.length===1)?q(It):q(ye,!1)})}G(()=>Pt=Ie(ce,1,"divider-drop-zone svelte-r539bm",null,Pt,{hovered:l(d)===`divider-${l(et)}`})),D("dragover",ce,q=>ve(`divider-${l(et)}`,q)),D("dragleave",ce,te),D("drop",ce,q=>U(l(et),q)),D("dragover",Fe,q=>Y(l(K).id,q)),D("dragleave",Fe,ie),D("drop",Fe,q=>z(l(K).id,q)),P(V,tt)});var Te=O(L,2);let ne;var Be=O(ue,2),Qe=S(Be);{var Cn=V=>{var K=ri();P(V,K)},pn=V=>{var K=Ne(),et=Q(K);pe(et,3,()=>l(o),(tt,ce)=>tt.substance||`row-${ce}`,(tt,ce,Pt)=>{const Fe=oe(()=>(l(ce),m(()=>l(ce).messages.every(Z=>Z.role==="assistant_tool_use"))));var dt=fi();let It;var ye=S(dt);pe(ye,3,r,Z=>Z.id,(Z,He,Ye)=>{var _e=oi(),he=Q(_e);let Ce;var vt=O(he,2);pe(vt,1,()=>[l(He)],xe=>xe.id,(xe,re)=>{const nt=oe(()=>(l(ce),l(u),l(re),m(()=>l(ce).messages.filter(De=>l(u).get(l(re).id)?.has(De.id))))),_t=oe(()=>($(l(nt)),m(()=>Se(l(nt))))),nn=oe(()=>($(l(_t)),m(()=>l(_t).length>0&&l(_t).every(De=>De.type==="tool_group"))));var rt=li();let rn;pe(rt,7,()=>l(_t),(De,de)=>De.type==="tool_group"?`tool-group-${l(re).id}-${l(Pt)}-${de}`:De.message.id,(De,de)=>{var gn=Ne(),as=Q(gn);{var is=Nt=>{var mn=ii(),bn=S(mn);{var os=St=>{const Rt=oe(()=>(s(),l(de),m(()=>s()[l(de).agent]?.name))),Lt=oe(()=>(l(de),$(l(Rt)),m(()=>l(de).agent+"_"+l(Rt)))),On=oe(()=>($(Dn),$(l(Lt)),m(()=>Dn(l(Lt)))));var In=si(),us=S(In);G(()=>{cn(In,`color: ${l(On)??""};`),se(us,`[${l(Rt)??""}]:`)}),P(St,In)};ae(bn,St=>{l(re),m(()=>l(re).agentIds.length>1)&&St(os)})}var fs=O(bn,2);pe(fs,1,()=>(l(de),m(()=>l(de).messages)),St=>St.id,(St,Rt)=>{var Lt=ai();D("click",Lt,()=>_(l(Rt))),D("keydown",Lt,On=>On.key==="Enter"&&_(l(Rt))),P(St,Lt)}),P(Nt,mn)},ls=Nt=>{{let mn=oe(()=>(s(),l(de),m(()=>s()[l(de).message.agent]?.name))),bn=oe(()=>(l(re),m(()=>l(re).agentIds.length>1)));ja(Nt,{get message(){return l(de),m(()=>l(de).message)},get agentName(){return l(mn)},get agentId(){return l(de),m(()=>l(de).message.agent)},get showPrefix(){return l(bn)}})}};ae(as,Nt=>{l(de),m(()=>l(de).type==="tool_group")?Nt(is):Nt(ls,!1)})}P(De,gn)}),G(()=>rn=Ie(rt,1,"message-cell svelte-r539bm",null,rn,{"tool-message-cell":l(nn)})),D("dragover",rt,De=>Y(l(re).id,De)),D("dragleave",rt,ie),D("drop",rt,De=>z(l(re).id,De)),P(xe,rt)}),G(()=>Ce=Ie(he,1,"divider-drop-zone svelte-r539bm",null,Ce,{hovered:l(d)===`divider-${l(Ye)}`})),D("dragover",he,xe=>ve(`divider-${l(Ye)}`,xe)),D("dragleave",he,te),D("drop",he,xe=>U(l(Ye),xe)),P(Z,_e)});var q=O(ye,2);let ke;G(()=>{It=Ie(dt,1,"message-row svelte-r539bm",null,It,{"tool-row":l(Fe)}),ke=Ie(q,1,"divider-drop-zone svelte-r539bm",null,ke,{hovered:l(d)===`divider-${r().length}`})}),D("dragover",q,Z=>ve(`divider-${r().length}`,Z)),D("dragleave",q,te),D("drop",q,Z=>U(r().length,Z)),P(tt,dt)}),P(V,K)};ae(Qe,V=>{l(o),m(()=>l(o).length===0)?V(Cn):V(pn,!1)})}G(()=>{J=Ie(I,1,"divider-drop-zone svelte-r539bm",null,J,{hovered:l(d)===`divider-${r().length}`}),ne=Ie(Te,1,"divider-drop-zone svelte-r539bm",null,ne,{hovered:l(d)===`divider-${r().length}`})}),D("dragover",I,V=>ve(`divider-${r().length}`,V)),D("dragleave",I,te),D("drop",I,V=>U(r().length,V)),D("dragover",Te,V=>ve(`divider-${r().length}`,V)),D("dragleave",Te,te),D("drop",Te,V=>U(r().length,V)),P(b,y)};ae(xt,b=>{r(),m(()=>r().length===0)?b(F):b(B,!1)})}var le=O(Ke,2);Ga(le,{get toolUseMessage(){return l(v)},onClose:x}),P(e,Le),Ct(),i()}var vi=C('<div role="region" aria-label="File drop zone"><div class="drop-zone-content svelte-1n46o8q"><h1 class="svelte-1n46o8q">Multi-Agent Event Log Viewer</h1> <p class="svelte-1n46o8q">Connecting to live session...</p> <p style="font-size: 0.9rem; color: #888; margin-top: 1rem;" class="svelte-1n46o8q">Or drag and drop a .jsonl log file here to view it</p> <p style="font-size: 0.8rem; color: #aaa; margin-top: 0.5rem;" class="svelte-1n46o8q">(You can also use ?log=/path/to/file.jsonl)</p></div></div>'),_i=C('<div class="viewer svelte-1n46o8q"><div class="hierarchy-section svelte-1n46o8q"><!></div> <div class="panels-section svelte-1n46o8q"><!></div></div>'),hi=C('<main class="svelte-1n46o8q"><!></main>');function pi(e,t){$t(t,!1);let n=H(!1),r=H(!1),s=!1,a={},i=[];function u(c){if(c.event_type==="agent_created")a[c.agent]||(a[c.agent]={id:c.agent,name:c.name,parent:c.parent,children:[],systemPrompts:[]},c.parent&&c.parent!=="user"&&a[c.parent]&&(a[c.parent].children.includes(c.agent)||a[c.parent].children.push(c.agent)),gt.set({...a}));else if(c.event_type==="transcript_entry"){if(c.role==="system"&&a[c.agent]){a[c.agent].systemPrompts.push(c.content),gt.set({...a});return}if(c.role==="user"||c.role==="assistant"&&!c.tool_calls){const g={id:c.message_id,agent:c.agent,role:c.role,content:c.content,substance:c.substance};i.push(g),En.set([...i])}}}function o(){const c=new EventSource("/events");return c.onmessage=g=>{const h=JSON.parse(g.data);u(h),l(r)||(M(r,!0),s=!0)},c.onerror=g=>{console.error("SSE connection error:",g)},c}Sa(async()=>{const g=new URLSearchParams(window.location.search).get("log");if(g){try{const w=await fetch(g);if(!w.ok)throw new Error(`Failed to fetch log file: ${w.status} ${w.statusText}`);const A=await w.text(),{agents:z,messages:Y}=mr(A);gt.set(z),En.set(Y),M(r,!0),s=!1;const ie=g.split("/").pop();document.title=ie||"Log Viewer"}catch(w){console.error("Failed to load log file from URL:",w),alert(`Failed to load log file: ${w.message}`)}return}try{const A=await(await fetch("/session-info")).json();A.filename&&(document.title=A.filename)}catch(w){console.error("Failed to fetch session info:",w)}const h=o();return()=>{h.close()}});function f(c){c.preventDefault(),M(n,!0)}function d(c){c.preventDefault(),M(n,!1)}async function p(c){c.preventDefault(),M(n,!1);const g=c.dataTransfer.files;if(g.length===0)return;const h=g[0];if(!h.name.endsWith(".jsonl")){alert("Please drop a .jsonl file");return}const w=await h.text(),{agents:A,messages:z}=mr(w);gt.set(A),En.set(z),M(r,!0),s=!1}tn();var v=hi(),_=S(v);{var x=c=>{var g=vi();let h;G(()=>h=Ie(g,1,"drop-zone svelte-1n46o8q",null,h,{"drag-over":l(n)})),D("dragover",g,f),D("dragleave",g,d),D("drop",g,p),P(c,g)},T=c=>{var g=_i(),h=S(g),w=S(h);Ra(w,{});var A=O(h,2),z=S(A);di(z,{}),P(c,g)};ae(_,c=>{l(r)?c(T,!1):c(x)})}P(e,v),Ct()}ha(pi,{target:document.getElementById("app")});</script>
    <style rel="stylesheet" crossorigin>*{box-sizing:border-box}body{margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,sans-serif;font-size:14px;line-height:1.6}#app{width:100%;height:100vh}.agent-node.svelte-1ulaew4{user-select:none}.agent-node.inline.svelte-1ulaew4{display:inline-flex;align-items:center}.agent-item.svelte-1ulaew4{display:flex;align-items:center;padding:.15rem 0;gap:.5rem}.agent-node.svelte-1ulaew4:not(.inline) .agent-node:not(.inline){margin-top:-.2rem}.toggle.svelte-1ulaew4{cursor:pointer;width:20px;display:inline-block;text-align:center;font-size:.8rem;user-select:none}.toggle-spacer.svelte-1ulaew4{width:20px;display:inline-block}.separator.svelte-1ulaew4{color:#999;font-size:.9rem;margin:0 .3rem}.agent-badge.svelte-1ulaew4{display:inline-flex;align-items:center;padding:.1rem .75rem;border-radius:12px;font-size:.9rem;font-weight:500;cursor:move;border:1px solid;transition:transform .2s}.agent-badge.svelte-1ulaew4:hover{transform:translateY(-1px)}.hierarchy.svelte-5r6xef{font-family:monospace}.empty.svelte-5r6xef{color:#999;font-style:italic}.message.svelte-kszgzy{margin-bottom:.5rem;word-wrap:break-word}.message.user.svelte-kszgzy{background:#f0f0f0;padding:.75rem 1rem;border-radius:8px;max-width:90%;margin-left:auto;margin-right:0}.message.assistant.svelte-kszgzy{width:100%}.message-content.svelte-kszgzy{white-space:pre-wrap;line-height:1.5}.agent-prefix.svelte-kszgzy{font-weight:700;margin-right:.5rem}.modal-backdrop.svelte-g00oa{position:fixed;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000;padding:2rem}.modal-content.svelte-g00oa{background:#fff;border-radius:8px;max-width:900px;width:100%;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 4px 20px #0000004d}.modal-header.svelte-g00oa{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #ddd}.modal-header.svelte-g00oa h2:where(.svelte-g00oa){margin:0;font-size:1.5rem}.close-btn.svelte-g00oa{background:none;border:none;font-size:2rem;cursor:pointer;color:#666;line-height:1;padding:0;width:2rem;height:2rem}.close-btn.svelte-g00oa:hover{color:#d32f2f}.modal-body.svelte-g00oa{overflow-y:auto;padding:1.5rem}.message-fields.svelte-g00oa{margin-bottom:1rem}.fields-display.svelte-g00oa{font-family:Courier New,Courier,monospace;font-size:.9rem;margin:0;margin-bottom:1rem}.field-line.svelte-g00oa{line-height:1.5}.field-name.svelte-g00oa{font-weight:700}.inline-tool-button.svelte-g00oa{background:transparent;color:#333;border:1px solid #999;padding:0 3px;border-radius:2px;cursor:pointer;font-family:Courier New,Courier,monospace;font-size:.9rem;font-weight:400;transition:all .15s;display:inline;margin:0;vertical-align:baseline}.inline-tool-button.svelte-g00oa:hover{background:#e8e8e8;border-color:#666}.inline-tool-button.selected.svelte-g00oa{background:#007bff;color:#fff;border-color:#0056b3}.divider.svelte-g00oa{border:none;border-top:1px solid #ccc;margin:1rem 0}.tool-call-details.svelte-g00oa,.tool-result-details.svelte-g00oa{margin:1rem 0}.details-display.svelte-g00oa{font-family:Courier New,Courier,monospace;font-size:.9rem;margin:0}.detail-line.svelte-g00oa{line-height:1.5;white-space:pre-wrap}.panels-container.svelte-r539bm,.empty-state-container.svelte-r539bm{display:flex;flex-direction:column;height:100%}.empty-state-header.svelte-r539bm{position:sticky;top:0;z-index:10;display:flex;align-items:center;justify-content:center;padding:.75rem;border-bottom:2px solid #ddd;background:#f9f9f9;min-height:3rem}.empty-state-text.svelte-r539bm{color:#999;font-style:italic;font-size:1rem}.messages-scroll-container.svelte-r539bm{flex:1;overflow-y:auto;overflow-x:auto}.panel-headers.svelte-r539bm{position:sticky;top:0;z-index:10;display:flex;border-bottom:2px solid #ddd;background:#f9f9f9}.divider-drop-zone.svelte-r539bm{min-width:2em;width:2em;background:transparent;position:relative;transition:background .2s;cursor:pointer}.divider-drop-zone.svelte-r539bm:before{content:"";position:absolute;left:50%;top:0;bottom:0;width:1px;background:#333;transform:translate(-50%)}.divider-drop-zone.hovered.svelte-r539bm{background:#add8e680}.panel-header.svelte-r539bm{flex:1;min-width:400px;padding:.75rem;transition:background .2s}.panel-header.hovered.svelte-r539bm{background:#add8e680}.agent-badges.svelte-r539bm{display:flex;gap:.5rem;flex-wrap:wrap}.agent-badge.svelte-r539bm{display:inline-flex;align-items:center;gap:.5rem;padding:.1rem .75rem;border-radius:12px;font-size:.9rem;font-weight:500;border:1px solid;cursor:move;user-select:none}.remove-btn.svelte-r539bm{background:none;border:none;cursor:pointer;font-size:1.2rem;line-height:1;padding:0;color:#666}.remove-btn.svelte-r539bm:hover{color:#d32f2f}.messages-grid.svelte-r539bm{min-width:fit-content}.message-row.svelte-r539bm{display:flex;min-height:40px}.tool-row.svelte-r539bm{min-height:auto}.message-cell.svelte-r539bm{flex:1;min-width:400px;padding:.5rem 1rem}.tool-message-cell.svelte-r539bm{padding:0 1rem}.tool-group.svelte-r539bm{display:flex;align-items:center;gap:.25rem}.tool-icon.svelte-r539bm{font-size:.6rem;padding:0;cursor:pointer;user-select:none;transition:transform .1s}.tool-icon.svelte-r539bm:hover{transform:scale(1.2)}.tool-icon.svelte-r539bm:active{transform:scale(1)}.agent-prefix.svelte-r539bm{font-weight:700;margin-right:.5rem}.empty-state.svelte-r539bm{padding:2rem;text-align:center;color:#999;font-style:italic}.system-prompts-row.svelte-r539bm{display:flex;min-height:fit-content}.system-prompts-cell.svelte-r539bm{flex:1;min-width:400px;padding:.5rem 1rem}.system-prompt-box.svelte-r539bm{border:2pt dashed #000;padding:.75rem;margin-bottom:.5rem;background:#fff}.system-prompt-agent-name.svelte-r539bm{font-weight:700;margin-bottom:.5rem;color:#333}.system-prompt-content.svelte-r539bm{white-space:pre-wrap;font-family:monospace,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:.8rem;line-height:1.5;color:#333}main.svelte-1n46o8q{width:100%;height:100vh;margin:0;padding:0}.drop-zone.svelte-1n46o8q{width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background:#f5f5f5;border:3px dashed #ccc;transition:all .3s}.drop-zone.drag-over.svelte-1n46o8q{background:#e8f4f8;border-color:#4a90e2}.drop-zone-content.svelte-1n46o8q{text-align:center}.drop-zone-content.svelte-1n46o8q h1:where(.svelte-1n46o8q){color:#333;margin-bottom:1rem}.drop-zone-content.svelte-1n46o8q p:where(.svelte-1n46o8q){color:#666;font-size:1.1rem}.viewer.svelte-1n46o8q{display:flex;flex-direction:column;height:100vh}.hierarchy-section.svelte-1n46o8q{border-bottom:2px solid #ddd;padding:.5rem 1rem;max-height:20vh;overflow-y:auto}.panels-section.svelte-1n46o8q{flex:1;overflow:hidden}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
